<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RDMnet: Using the EPT Client API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="etclibtool.css" rel="stylesheet" type="text/css"/>
<link href="rdmnet_dox_styles.css" rel="stylesheet" type="text/css"/>
<!-- BEGIN CUSTOM SCRIPTS -->
<!-- BEGIN ETCLIBTOOL VERSION SELECTOR SCRIPT -->
<script type="text/javascript">
  $(function () {
    $.get('/RDMnetDocs/versions.txt', function (data) {
      if (data) {
        var lines = data.split('\n');
        if (lines.length > 0) {
          var version_select = $("#version_select").empty();
          lines.forEach(function (line) {
            line = line.trim();
            if (!line) {
              return;
            }
            line = line.split(':');
            var option_name = line[0].replace(/^v/, '');
            if (line.length > 1) {
              option_name += ' (' + line[1] + ')';
            }
            var option_val = '/RDMnetDocs/' + line[0];
            var option = $('<option></option>').attr("value", option_val)
              .text(option_name);
            if (window.location.pathname.match(line[0])) {
              option = option.attr("selected", "selected");
            }
            version_select.append(option);
          });
        }
      }
    }, 'text');
  });
</script>
<!-- END ETCLIBTOOL VERSION SELECTOR SCRIPT -->
<script type="text/javascript">
  $(function () { selectAllC() });
</script>
<script type="text/javascript">
  function selectAllC() {
    // Enable all C-language blocks
    var tabcontent = document.getElementsByClassName("code-tab-content");
    for (i = 0; i < tabcontent.length; i++) {
      if (tabcontent[i].id.endsWith("_c")) {
        tabcontent[i].style.display = "block";
      } else {
        tabcontent[i].style.display = "none"
      }
    }
    // Enable all C-language buttons
    var tablinks = document.getElementsByClassName("code-tab-links");
    for (i = 0; i < tablinks.length; i++) {
      if (tablinks[i].id.endsWith("_c")) {
        if (!tablinks[i].className.includes("active")) {
          tablinks[i].className = tablinks[i].className += " active";
        }
      } else {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
    }
  }
  function selectAllCpp() {
    // Enable all C++-language blocks
    var tabcontent = document.getElementsByClassName("code-tab-content");
    for (i = 0; i < tabcontent.length; i++) {
      if (tabcontent[i].id.endsWith("_cpp")) {
        tabcontent[i].style.display = "block";
      } else {
        tabcontent[i].style.display = "none"
      }
    }
    // Enable all C++-language buttons
    var tablinks = document.getElementsByClassName("code-tab-links");
    for (i = 0; i < tablinks.length; i++) {
      if (tablinks[i].id.endsWith("_cpp")) {
        if (!tablinks[i].className.includes("active")) {
          tablinks[i].className = tablinks[i].className += " active";
        }
      } else {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
    }
  }
  function selectLanguage(evt, block_id, language) {
    // Get all elements with class="tabcontent" and hide them
    var tabcontent = document.getElementsByClassName("code-tab-content");
    for (i = 0; i < tabcontent.length; i++) {
      if (tabcontent[i].id.startsWith("div_" + block_id)) {
        tabcontent[i].style.display = "none";
      }
    }
    // Get all elements with class="tablinks" and remove the class "active"
    var tablinks = document.getElementsByClassName("code-tab-links");
    for (i = 0; i < tablinks.length; i++) {
      if (tablinks[i].id.startsWith("button_" + block_id)) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
    }
    // Show the current tab, and add an "active" class to the button that opened the tab
    document.getElementById("div_" + block_id + "_" + language).style.display = "block";
    if (!evt.currentTarget.className.includes("active")) {
      evt.currentTarget.className += " active";
    }
  }
</script>
<!-- END CUSTOM SCRIPTS -->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RDMnet
   &#160;<span id="projectnumber">HEAD (unstable)</span>
   </div>
   <div id="projectbrief">Implementation of ANSI E1.33 (RDMnet)</div>
  </td>
  <!-- BEGIN VERSION SELECTOR INSERTED BY ETCLIBTOOL -->
  <td style="text-align: right; padding-right: 0.5em">
    <div id="otherversions">
      View other versions:
      <select id="version_select" onchange="location = this.value">
      </select>
    </div>
  </td>
  <!-- END VERSION SELECTOR INSERTED BY ETCLIBTOOL -->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('using_ept_client.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Using the EPT Client API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__tmp_tmp5nbfg0sc_docs_getting_started_using_ept_client"></a> The EPT Client API exposes both a C and C++ language interface. The C++ interface is a header-only wrapper around the C interface.</p>
<p> 
<div class="code-tab-page-selector">
  <button id="button_1_c" class="code-tab-links" onclick="selectAllC()">Show All C Snippets</button>
  <button id="button_1_cpp" class="code-tab-links" onclick="selectAllCpp()">Show All C++ Snippets</button>
</div>
</p>
<h1>Initialization</h1>
<p>The RDMnet library must be globally initialized before using the EPT Client API. See <a class="el" href="global_init_and_destroy.html">Global Initialization and Destruction</a>.</p>
<p>To create an EPT client instance, use the <a class="el" href="group__rdmnet__ept__client.html#ga3f36b435183b71dcb303901bb814faa8" title="Create a new instance of RDMnet EPT client functionality.">rdmnet_ept_client_create()</a> function in C, or instantiate an <a class="el" href="classrdmnet_1_1_ept_client.html" title="An instance of RDMnet EPT client functionality.">rdmnet::EptClient</a> and call its Startup() function in C++.</p>
<p>The EPT Client API is an asynchronous, callback-oriented API. Part of the initial configuration for an EPT client instance is a set of function pointers (or abstract interface) for the library to use as callbacks. Callbacks are dispatched from the background thread that is started when the RDMnet library is initialized.</p>
<p> 
<div class="code-tab-selector">
  <button id="button_2_c" class="code-tab-links" onclick="selectLanguage(event, '2', 'c')">C</button>
  <button id="button_2_cpp" class="code-tab-links" onclick="selectLanguage(event, '2', 'cpp')">C++</button>
</div>
<div id="div_2_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="ept__client_8h.html">rdmnet/ept_client.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Sets optional values to defaults. </span></div>
<div class="line"><a class="code" href="struct_rdmnet_ept_client_config.html">RdmnetEptClientConfig</a> config = <a class="code" href="group__rdmnet__ept__client.html#gae4f33c5d2b6c8e0e84871337f41b16ea">RDMNET_EPT_CLIENT_CONFIG_DEFAULT_INIT</a>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Each EPT client is a component that must have a Component ID (CID), which is simply a UUID.</span></div>
<div class="line"><span class="comment">// Software should generate and save a CID so that the same one is used on each run of the software.</span></div>
<div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__uuid.html#gabb977b5a218b4b62224c016bf3932f10">etcpal_generate_os_preferred_uuid</a>(&amp;config.<a class="code" href="struct_rdmnet_ept_client_config.html#ae618cb974a2e9b1250a78d572a6a3094">cid</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Set the callback functions - defined elsewhere</span></div>
<div class="line"><span class="comment">// p_some_opaque_data is an opaque data pointer that will be passed back to each callback function</span></div>
<div class="line"><a class="code" href="group__rdmnet__ept__client.html#gac3fcdb73055eb584ce97263b1f1a15fa">rdmnet_ept_client_set_callbacks</a>(&amp;config, my_ept_connected_cb, my_ept_connect_failed_cb, my_ept_disconnected_cb,</div>
<div class="line">                                my_ept_client_list_update_received_cb, my_ept_data_received_cb,</div>
<div class="line">                                my_ept_status_received_cb, p_some_opaque_data);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Provide information about the EPT sub-protocols we support. Protocols are namespaced under your</span></div>
<div class="line"><span class="comment">// ESTA manufacturer ID. If you have not yet requested an ESTA manufacturer ID, the range 0x7ff0 to</span></div>
<div class="line"><span class="comment">// 0x7fff can be used for prototyping.</span></div>
<div class="line"><a class="code" href="struct_rdmnet_ept_sub_protocol.html">RdmnetEptSubProtocol</a> my_protocols[2] = {</div>
<div class="line">  {</div>
<div class="line">    MY_ESTA_MANUFACTURER_ID, <span class="comment">// Our ESTA manufacturer ID.</span></div>
<div class="line">    1,                       <span class="comment">// The protocol number.</span></div>
<div class="line">    <span class="stringliteral">&quot;My protocol 1&quot;</span>          <span class="comment">// A descriptive string about the protocol.</span></div>
<div class="line">  },</div>
<div class="line">  {</div>
<div class="line">    MY_ESTA_MANUFACTURER_ID,</div>
<div class="line">    2,</div>
<div class="line">    <span class="stringliteral">&quot;My protocol 2&quot;</span></div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line">config.<a class="code" href="struct_rdmnet_ept_client_config.html#a04d0c31184e6bc3c9818bcd27f390626">protocols</a> = my_protocols;</div>
<div class="line">config.<a class="code" href="struct_rdmnet_ept_client_config.html#adc7213b80e2fb086ec1ed3d8bea7d531">num_protocols</a> = 2;</div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__rdmnet__ept__client.html#gafe4439590493e7a8abedabc8de8ab51c">rdmnet_ept_client_t</a> my_ept_client_handle;</div>
<div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__error.html#ga743b0648f0ca798ef29c9f69c6e255af">etcpal_error_t</a> result = <a class="code" href="group__rdmnet__ept__client.html#ga3f36b435183b71dcb303901bb814faa8">rdmnet_ept_client_create</a>(&amp;config, &amp;my_ept_client_handle);</div>
<div class="line"><span class="keywordflow">if</span> (result == <a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__error.html#gga743b0648f0ca798ef29c9f69c6e255afae403d046b4ba4e81dce121266c2cca8d">kEtcPalErrOk</a>)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Handle is valid and may be referenced in later calls to API functions.</span></div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">{</div>
<div class="line">  printf(<span class="stringliteral">&quot;RDMnet EPT client creation failed with error: %s\n&quot;</span>, <a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__error.html#ga4902a840d9801e02baebd4c70924c4b0">etcpal_strerror</a>(result));</div>
<div class="line">}</div>
<div class="ttc" id="aept__client_8h_html"><div class="ttname"><a href="ept__client_8h.html">ept_client.h</a></div><div class="ttdoc">Definitions for the RDMnet EPT Client API.</div></div>
<div class="ttc" id="agroup__etcpal__error_html_ga4902a840d9801e02baebd4c70924c4b0"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__error.html#ga4902a840d9801e02baebd4c70924c4b0">etcpal_strerror</a></div><div class="ttdeci">const char * etcpal_strerror(etcpal_error_t code)</div></div>
<div class="ttc" id="agroup__etcpal__error_html_ga743b0648f0ca798ef29c9f69c6e255af"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__error.html#ga743b0648f0ca798ef29c9f69c6e255af">etcpal_error_t</a></div><div class="ttdeci">etcpal_error_t</div></div>
<div class="ttc" id="agroup__etcpal__error_html_gga743b0648f0ca798ef29c9f69c6e255afae403d046b4ba4e81dce121266c2cca8d"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__error.html#gga743b0648f0ca798ef29c9f69c6e255afae403d046b4ba4e81dce121266c2cca8d">kEtcPalErrOk</a></div><div class="ttdeci">kEtcPalErrOk</div></div>
<div class="ttc" id="agroup__etcpal__uuid_html_gabb977b5a218b4b62224c016bf3932f10"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__uuid.html#gabb977b5a218b4b62224c016bf3932f10">etcpal_generate_os_preferred_uuid</a></div><div class="ttdeci">etcpal_error_t etcpal_generate_os_preferred_uuid(EtcPalUuid *uuid)</div></div>
<div class="ttc" id="agroup__rdmnet__ept__client_html_ga3f36b435183b71dcb303901bb814faa8"><div class="ttname"><a href="group__rdmnet__ept__client.html#ga3f36b435183b71dcb303901bb814faa8">rdmnet_ept_client_create</a></div><div class="ttdeci">etcpal_error_t rdmnet_ept_client_create(const RdmnetEptClientConfig *config, rdmnet_ept_client_t *handle)</div><div class="ttdoc">Create a new instance of RDMnet EPT client functionality.</div><div class="ttdef"><b>Definition:</b> ept_client.c:96</div></div>
<div class="ttc" id="agroup__rdmnet__ept__client_html_gac3fcdb73055eb584ce97263b1f1a15fa"><div class="ttname"><a href="group__rdmnet__ept__client.html#gac3fcdb73055eb584ce97263b1f1a15fa">rdmnet_ept_client_set_callbacks</a></div><div class="ttdeci">void rdmnet_ept_client_set_callbacks(RdmnetEptClientConfig *config, RdmnetEptClientConnectedCallback connected, RdmnetEptClientConnectFailedCallback connect_failed, RdmnetEptClientDisconnectedCallback disconnected, RdmnetEptClientClientListUpdateReceivedCallback client_list_update_received, RdmnetEptClientDataReceivedCallback data_received, RdmnetEptClientStatusReceivedCallback status_received, void *context)</div><div class="ttdoc">Set the callbacks in an RDMnet EPT client configuration structure.</div><div class="ttdef"><b>Definition:</b> ept_client.c:61</div></div>
<div class="ttc" id="agroup__rdmnet__ept__client_html_gae4f33c5d2b6c8e0e84871337f41b16ea"><div class="ttname"><a href="group__rdmnet__ept__client.html#gae4f33c5d2b6c8e0e84871337f41b16ea">RDMNET_EPT_CLIENT_CONFIG_DEFAULT_INIT</a></div><div class="ttdeci">#define RDMNET_EPT_CLIENT_CONFIG_DEFAULT_INIT</div><div class="ttdoc">A default-value initializer for an RdmnetEptClientConfig struct.</div><div class="ttdef"><b>Definition:</b> ept_client.h:188</div></div>
<div class="ttc" id="agroup__rdmnet__ept__client_html_gafe4439590493e7a8abedabc8de8ab51c"><div class="ttname"><a href="group__rdmnet__ept__client.html#gafe4439590493e7a8abedabc8de8ab51c">rdmnet_ept_client_t</a></div><div class="ttdeci">int rdmnet_ept_client_t</div><div class="ttdoc">A handle to an RDMnet EPT Client.</div><div class="ttdef"><b>Definition:</b> ept_client.h:53</div></div>
<div class="ttc" id="astruct_rdmnet_ept_client_config_html"><div class="ttname"><a href="struct_rdmnet_ept_client_config.html">RdmnetEptClientConfig</a></div><div class="ttdoc">A set of information that defines the startup parameters of an EPT client.</div><div class="ttdef"><b>Definition:</b> ept_client.h:148</div></div>
<div class="ttc" id="astruct_rdmnet_ept_client_config_html_a04d0c31184e6bc3c9818bcd27f390626"><div class="ttname"><a href="struct_rdmnet_ept_client_config.html#a04d0c31184e6bc3c9818bcd27f390626">RdmnetEptClientConfig::protocols</a></div><div class="ttdeci">const RdmnetEptSubProtocol * protocols</div><div class="ttdoc">The list of EPT sub-protocols that this EPT client supports.</div><div class="ttdef"><b>Definition:</b> ept_client.h:158</div></div>
<div class="ttc" id="astruct_rdmnet_ept_client_config_html_adc7213b80e2fb086ec1ed3d8bea7d531"><div class="ttname"><a href="struct_rdmnet_ept_client_config.html#adc7213b80e2fb086ec1ed3d8bea7d531">RdmnetEptClientConfig::num_protocols</a></div><div class="ttdeci">size_t num_protocols</div><div class="ttdoc">The size of the protocols array.</div><div class="ttdef"><b>Definition:</b> ept_client.h:160</div></div>
<div class="ttc" id="astruct_rdmnet_ept_client_config_html_ae618cb974a2e9b1250a78d572a6a3094"><div class="ttname"><a href="struct_rdmnet_ept_client_config.html#ae618cb974a2e9b1250a78d572a6a3094">RdmnetEptClientConfig::cid</a></div><div class="ttdeci">EtcPalUuid cid</div><div class="ttdoc">The EPT client's CID.</div><div class="ttdef"><b>Definition:</b> ept_client.h:154</div></div>
<div class="ttc" id="astruct_rdmnet_ept_sub_protocol_html"><div class="ttname"><a href="struct_rdmnet_ept_sub_protocol.html">RdmnetEptSubProtocol</a></div><div class="ttdoc">A description of an EPT sub-protocol.</div><div class="ttdef"><b>Definition:</b> message.h:380</div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_2_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="cpp_2ept__client_8h.html">rdmnet/cpp/ept_client.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>MyEptNotifyHandler : <span class="keyword">public</span> <a class="code" href="classrdmnet_1_1_ept_client_1_1_notify_handler.html">rdmnet::EptClient::NotifyHandler</a></div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Implement the NotifyHandler callbacks...</span></div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">MyEptNotifyHandler my_ept_notify_handler;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Each EPT client is a component that must have a Component ID (CID), which is simply a UUID.</span></div>
<div class="line"><span class="comment">// Software should generate and save a CID so that the same one is used on each run of the software.</span></div>
<div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_uuid.html">etcpal::Uuid</a> my_cid = <a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_uuid.html#ae1ccf480526751a937afb32a2db7346a">etcpal::Uuid::OsPreferred</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Provide information about the EPT sub-protocols we support. Protocols are namespaced under your</span></div>
<div class="line"><span class="comment">// ESTA manufacturer ID. If you have not yet requested an ESTA manufacturer ID, the range 0x7ff0 to</span></div>
<div class="line"><span class="comment">// 0x7fff can be used for prototyping.</span></div>
<div class="line">std::vector&lt;rdmnet::EptSubProtocol&gt; my_protocols = {</div>
<div class="line">  {</div>
<div class="line">    MY_ESTA_MANUFACTURER_ID, <span class="comment">// Our ESTA manufacturer ID.</span></div>
<div class="line">    1,                       <span class="comment">// The protocol number.</span></div>
<div class="line">    <span class="stringliteral">&quot;My protocol 1&quot;</span>          <span class="comment">// A descriptive string about the protocol.</span></div>
<div class="line">  },</div>
<div class="line">  {</div>
<div class="line">    MY_ESTA_MANUFACTURER_ID,</div>
<div class="line">    2,</div>
<div class="line">    <span class="stringliteral">&quot;My protocol 2&quot;</span></div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Contains the configuration settings that the EPT client needs to operate. Some of these are set</span></div>
<div class="line"><span class="comment">// to default values and can be changed if necessary. </span></div>
<div class="line"><a class="code" href="structrdmnet_1_1_ept_client_1_1_settings.html">rdmnet::EptClient::Settings</a> my_settings(my_cid, my_protocols);</div>
<div class="line"> </div>
<div class="line"><a class="code" href="classrdmnet_1_1_ept_client.html">rdmnet::EptClient</a> ept_client;</div>
<div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_error.html">etcpal::Error</a> result = ept_client.<a class="code" href="classrdmnet_1_1_ept_client.html#ae338508e79fbeb7183e396ac9efbd951">Startup</a>(my_ept_notify_handler, my_settings);</div>
<div class="line"><span class="keywordflow">if</span> (result)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// EPT client is valid and running.</span></div>
<div class="line">  <a class="code" href="classrdmnet_1_1_ept_client.html#a36b8fa2d0851a29b79c4ae6824484af6">rdmnet::EptClient::Handle</a> handle = ept_client.<a class="code" href="classrdmnet_1_1_ept_client.html#adf5e53f23d12edf16c30a1ef2f9b1fc8">handle</a>();</div>
<div class="line">  <span class="comment">// Store handle for later lookup from the NotifyHandler callback functions.</span></div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">{</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;RDMnet EPT client startup failed with error: &quot;</span> &lt;&lt; result.<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_error.html#a19c380b03cea21d7ac7325136a131ff0">ToString</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclassetcpal_1_1_error_html"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_error.html">etcpal::Error</a></div></div>
<div class="ttc" id="aclassetcpal_1_1_error_html_a19c380b03cea21d7ac7325136a131ff0"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_error.html#a19c380b03cea21d7ac7325136a131ff0">etcpal::Error::ToString</a></div><div class="ttdeci">std::string ToString() const</div></div>
<div class="ttc" id="aclassetcpal_1_1_uuid_html"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_uuid.html">etcpal::Uuid</a></div></div>
<div class="ttc" id="aclassetcpal_1_1_uuid_html_ae1ccf480526751a937afb32a2db7346a"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_uuid.html#ae1ccf480526751a937afb32a2db7346a">etcpal::Uuid::OsPreferred</a></div><div class="ttdeci">static Uuid OsPreferred() noexcept</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_client_1_1_notify_handler_html"><div class="ttname"><a href="classrdmnet_1_1_ept_client_1_1_notify_handler.html">rdmnet::EptClient::NotifyHandler</a></div><div class="ttdoc">A base class for a class that receives notification callbacks from an EPT client.</div><div class="ttdef"><b>Definition:</b> ept_client.h:62</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_client_html"><div class="ttname"><a href="classrdmnet_1_1_ept_client.html">rdmnet::EptClient</a></div><div class="ttdoc">An instance of RDMnet EPT client functionality.</div><div class="ttdef"><b>Definition:</b> ept_client.h:50</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_client_html_a36b8fa2d0851a29b79c4ae6824484af6"><div class="ttname"><a href="classrdmnet_1_1_ept_client.html#a36b8fa2d0851a29b79c4ae6824484af6">rdmnet::EptClient::Handle</a></div><div class="ttdeci">rdmnet_ept_client_t Handle</div><div class="ttdoc">A handle type used by the RDMnet library to identify EPT client instances.</div><div class="ttdef"><b>Definition:</b> ept_client.h:53</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_client_html_adf5e53f23d12edf16c30a1ef2f9b1fc8"><div class="ttname"><a href="classrdmnet_1_1_ept_client.html#adf5e53f23d12edf16c30a1ef2f9b1fc8">rdmnet::EptClient::handle</a></div><div class="ttdeci">Handle handle() const</div><div class="ttdoc">Retrieve the handle of an EPT client instance.</div><div class="ttdef"><b>Definition:</b> ept_client.h:335</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_client_html_ae338508e79fbeb7183e396ac9efbd951"><div class="ttname"><a href="classrdmnet_1_1_ept_client.html#ae338508e79fbeb7183e396ac9efbd951">rdmnet::EptClient::Startup</a></div><div class="ttdeci">etcpal::Error Startup(NotifyHandler &amp;notify_handler, const Settings &amp;settings)</div><div class="ttdoc">Allocate resources and start up this EPT client with the given configuration.</div><div class="ttdef"><b>Definition:</b> ept_client.h:187</div></div>
<div class="ttc" id="acpp_2ept__client_8h_html"><div class="ttname"><a href="cpp_2ept__client_8h.html">ept_client.h</a></div><div class="ttdoc">C++ wrapper for the RDMnet EPT Client API.</div></div>
<div class="ttc" id="astructrdmnet_1_1_ept_client_1_1_settings_html"><div class="ttname"><a href="structrdmnet_1_1_ept_client_1_1_settings.html">rdmnet::EptClient::Settings</a></div><div class="ttdoc">A set of configuration settings that an EPT client needs to initialize.</div><div class="ttdef"><b>Definition:</b> ept_client.h:118</div></div>
</div><!-- fragment --><p> 
</div>
</p>
<h1>Deinitialization</h1>
<p>The EPT client should be shut down and destroyed gracefully before program termination. This will send a graceful disconnect message to any connected brokers and deallocate the EPT client's resources.</p>
<p> 
<div class="code-tab-selector">
  <button id="button_3_c" class="code-tab-links" onclick="selectLanguage(event, '3', 'c')">C</button>
  <button id="button_3_cpp" class="code-tab-links" onclick="selectLanguage(event, '3', 'cpp')">C++</button>
</div>
<div id="div_3_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><a class="code" href="group__rdmnet__ept__client.html#ga6d22de48655c9f453b2b246e904e6c57">rdmnet_ept_client_destroy</a>(my_ept_client_handle, <a class="code" href="group__rdmnet__api__common.html#gga3eb1adaf6e830a807d1dcfbc64197222a336a46d8d36f5b1f32fac4653913cdd2">kRdmnetDisconnectShutdown</a>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// At this point, the EPT client is no longer running and its handle is no longer valid.</span></div>
<div class="ttc" id="agroup__rdmnet__api__common_html_gga3eb1adaf6e830a807d1dcfbc64197222a336a46d8d36f5b1f32fac4653913cdd2"><div class="ttname"><a href="group__rdmnet__api__common.html#gga3eb1adaf6e830a807d1dcfbc64197222a336a46d8d36f5b1f32fac4653913cdd2">kRdmnetDisconnectShutdown</a></div><div class="ttdeci">@ kRdmnetDisconnectShutdown</div><div class="ttdoc">The remote component is shutting down.</div><div class="ttdef"><b>Definition:</b> common.h:87</div></div>
<div class="ttc" id="agroup__rdmnet__ept__client_html_ga6d22de48655c9f453b2b246e904e6c57"><div class="ttname"><a href="group__rdmnet__ept__client.html#ga6d22de48655c9f453b2b246e904e6c57">rdmnet_ept_client_destroy</a></div><div class="ttdeci">etcpal_error_t rdmnet_ept_client_destroy(rdmnet_ept_client_t client_handle, rdmnet_disconnect_reason_t disconnect_reason)</div><div class="ttdoc">Destroy an EPT client instance.</div><div class="ttdef"><b>Definition:</b> ept_client.c:117</div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_3_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line">ept_client.<a class="code" href="classrdmnet_1_1_ept_client.html#a4590d3e0925a92a92c028661a8415c36">Shutdown</a>();</div>
<div class="line"> </div>
<div class="line"><span class="comment">// At this point, the EPT client is no longer running and its handle is no longer valid. It can be</span></div>
<div class="line"><span class="comment">// started again (with a new handle) by calling Startup() again.</span></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_client_html_a4590d3e0925a92a92c028661a8415c36"><div class="ttname"><a href="classrdmnet_1_1_ept_client.html#a4590d3e0925a92a92c028661a8415c36">rdmnet::EptClient::Shutdown</a></div><div class="ttdeci">void Shutdown(rdmnet_disconnect_reason_t disconnect_reason=kRdmnetDisconnectShutdown)</div><div class="ttdoc">Shut down this EPT client and deallocate resources.</div><div class="ttdef"><b>Definition:</b> ept_client.h:200</div></div>
</div><!-- fragment --><p> 
</div>
</p>
<h1>Managing Scopes</h1>
<p>An EPT client instance is initially created without any configured scopes. If the app has not been reconfigured by a user, the E1.33 RDMnet standard requires that the RDMnet default scope be configured automatically. There is a shortcut function for this. Otherwise, you can add a custom scope.</p>
<p>Per the requirements of RDMnet, a scope string is always UTF-8 and is thus represented by a char[] in C and a std::string in C++.</p>
<p>See the "Scopes" section in <a class="el" href="how_it_works.html">How RDMnet Works</a> for more information on scopes.</p>
<p> 
<div class="code-tab-selector">
  <button id="button_4_c" class="code-tab-links" onclick="selectLanguage(event, '4', 'c')">C</button>
  <button id="button_4_cpp" class="code-tab-links" onclick="selectLanguage(event, '4', 'cpp')">C++</button>
</div>
<div id="div_4_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="comment">// Add a default scope</span></div>
<div class="line"><a class="code" href="group__rdmnet__api__common.html#ga7244ab5c8edb8bc9c1e4792a6c64f798">rdmnet_client_scope_t</a> default_scope_handle;</div>
<div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__error.html#ga743b0648f0ca798ef29c9f69c6e255af">etcpal_error_t</a> result = <a class="code" href="group__rdmnet__ept__client.html#gae1c2cc3b36ff8712cea0e62416c326af">rdmnet_ept_client_add_default_scope</a>(my_ept_client_handle, &amp;default_scope_handle);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Add a custom scope</span></div>
<div class="line"><a class="code" href="struct_rdmnet_scope_config.html">RdmnetScopeConfig</a> scope_config;</div>
<div class="line"><a class="code" href="group__rdmnet__api__common.html#ga0b906d1d6ed5fcc678e9c530e440b62f">RDMNET_CLIENT_SET_SCOPE</a>(&amp;scope_config, <span class="stringliteral">&quot;custom_scope_name&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__rdmnet__api__common.html#ga7244ab5c8edb8bc9c1e4792a6c64f798">rdmnet_client_scope_t</a> custom_scope_handle;</div>
<div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__error.html#ga743b0648f0ca798ef29c9f69c6e255af">etcpal_error_t</a> result = <a class="code" href="group__rdmnet__ept__client.html#gaabb006c941893a84cf4727d672322a94">rdmnet_ept_client_add_scope</a>(my_ept_client_handle, &amp;scope_config, &amp;custom_scope_handle);</div>
<div class="ttc" id="agroup__rdmnet__api__common_html_ga0b906d1d6ed5fcc678e9c530e440b62f"><div class="ttname"><a href="group__rdmnet__api__common.html#ga0b906d1d6ed5fcc678e9c530e440b62f">RDMNET_CLIENT_SET_SCOPE</a></div><div class="ttdeci">#define RDMNET_CLIENT_SET_SCOPE(configptr, scope_str)</div><div class="ttdoc">Initialize an RdmnetScopeConfig struct with a scope string.</div><div class="ttdef"><b>Definition:</b> client.h:262</div></div>
<div class="ttc" id="agroup__rdmnet__api__common_html_ga7244ab5c8edb8bc9c1e4792a6c64f798"><div class="ttname"><a href="group__rdmnet__api__common.html#ga7244ab5c8edb8bc9c1e4792a6c64f798">rdmnet_client_scope_t</a></div><div class="ttdeci">int rdmnet_client_scope_t</div><div class="ttdoc">A handle to a scope that an RDMnet client participates in.</div><div class="ttdef"><b>Definition:</b> client.h:41</div></div>
<div class="ttc" id="agroup__rdmnet__ept__client_html_gaabb006c941893a84cf4727d672322a94"><div class="ttname"><a href="group__rdmnet__ept__client.html#gaabb006c941893a84cf4727d672322a94">rdmnet_ept_client_add_scope</a></div><div class="ttdeci">etcpal_error_t rdmnet_ept_client_add_scope(rdmnet_ept_client_t client_handle, const RdmnetScopeConfig *scope_config, rdmnet_client_scope_t *scope_handle)</div><div class="ttdoc">Add a new scope to an EPT client instance.</div><div class="ttdef"><b>Definition:</b> ept_client.c:142</div></div>
<div class="ttc" id="agroup__rdmnet__ept__client_html_gae1c2cc3b36ff8712cea0e62416c326af"><div class="ttname"><a href="group__rdmnet__ept__client.html#gae1c2cc3b36ff8712cea0e62416c326af">rdmnet_ept_client_add_default_scope</a></div><div class="ttdeci">etcpal_error_t rdmnet_ept_client_add_default_scope(rdmnet_ept_client_t client_handle, rdmnet_client_scope_t *scope_handle)</div><div class="ttdoc">Add a new scope representing the default RDMnet scope to an EPT client instance.</div><div class="ttdef"><b>Definition:</b> ept_client.c:168</div></div>
<div class="ttc" id="astruct_rdmnet_scope_config_html"><div class="ttname"><a href="struct_rdmnet_scope_config.html">RdmnetScopeConfig</a></div><div class="ttdoc">A set of configuration information for a single scope in which an RDMnet client is participating.</div><div class="ttdef"><b>Definition:</b> client.h:224</div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_4_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_expected.html">etcpal::Expected&lt;rdmnet::ScopeHandle&gt;</a> add_res = ept_client.<a class="code" href="classrdmnet_1_1_ept_client.html#a555b53b301e2b732058df8c0e805dc62">AddDefaultScope</a>();</div>
<div class="line"><span class="comment">// Or...</span></div>
<div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_expected.html">etcpal::Expected&lt;rdmnet::ScopeHandle&gt;</a> add_res = ept_client.<a class="code" href="classrdmnet_1_1_ept_client.html#aebcb6c7c8d9b16280766525ca25b524b">AddScope</a>(<span class="stringliteral">&quot;custom_scope_name&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (add_res)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="group__rdmnet__cpp__common.html#gadf5994aa4727265c21622c5a0f997ceb">rdmnet::ScopeHandle</a> default_scope_handle = *add_res;</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">{</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Error adding default scope: &#39;&quot;</span> &lt;&lt; add_res.<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_expected.html#a60850b440a4ff7f769627b46d79043f6">error</a>().<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_error.html#a19c380b03cea21d7ac7325136a131ff0">ToString</a>() &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span></div>
<div class="line">}</div>
<div class="ttc" id="aclassetcpal_1_1_expected_html"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_expected.html">etcpal::Expected</a></div></div>
<div class="ttc" id="aclassetcpal_1_1_expected_html_a60850b440a4ff7f769627b46d79043f6"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_expected.html#a60850b440a4ff7f769627b46d79043f6">etcpal::Expected::error</a></div><div class="ttdeci">constexpr Error error() const noexcept</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_client_html_a555b53b301e2b732058df8c0e805dc62"><div class="ttname"><a href="classrdmnet_1_1_ept_client.html#a555b53b301e2b732058df8c0e805dc62">rdmnet::EptClient::AddDefaultScope</a></div><div class="ttdeci">etcpal::Expected&lt; ScopeHandle &gt; AddDefaultScope(const etcpal::SockAddr &amp;static_broker_addr=etcpal::SockAddr{})</div><div class="ttdoc">Shortcut to add the default RDMnet scope to an EPT client instance.</div><div class="ttdef"><b>Definition:</b> ept_client.h:247</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_client_html_aebcb6c7c8d9b16280766525ca25b524b"><div class="ttname"><a href="classrdmnet_1_1_ept_client.html#aebcb6c7c8d9b16280766525ca25b524b">rdmnet::EptClient::AddScope</a></div><div class="ttdeci">etcpal::Expected&lt; ScopeHandle &gt; AddScope(const char *id, const etcpal::SockAddr &amp;static_broker_addr=etcpal::SockAddr{})</div><div class="ttdoc">Add a new scope to this EPT client instance.</div><div class="ttdef"><b>Definition:</b> ept_client.h:216</div></div>
<div class="ttc" id="agroup__rdmnet__cpp__common_html_gadf5994aa4727265c21622c5a0f997ceb"><div class="ttname"><a href="group__rdmnet__cpp__common.html#gadf5994aa4727265c21622c5a0f997ceb">rdmnet::ScopeHandle</a></div><div class="ttdeci">rdmnet_client_scope_t ScopeHandle</div><div class="ttdoc">A handle to a scope that an RDMnet client participates in.</div><div class="ttdef"><b>Definition:</b> client.h:447</div></div>
</div><!-- fragment --><p> 
</div>
</p>
<h2>Dynamic vs Static Scopes</h2>
<p>Adding a scope will immediately begin the scope connection state machine from the RDMnet tick thread. If a static configuration is not provided (using the <a class="el" href="group__rdmnet__api__common.html#ga0b906d1d6ed5fcc678e9c530e440b62f" title="Initialize an RdmnetScopeConfig struct with a scope string.">RDMNET_CLIENT_SET_SCOPE()</a> macro to initialize an <a class="el" href="struct_rdmnet_scope_config.html" title="A set of configuration information for a single scope in which an RDMnet client is participating.">RdmnetScopeConfig</a>, or calling <a class="el" href="classrdmnet_1_1_ept_client.html#aebcb6c7c8d9b16280766525ca25b524b" title="Add a new scope to this EPT client instance.">rdmnet::EptClient::AddScope()</a> with only one argument) the first action will be to attempt to discover brokers for this scope using DNS-SD. Once a broker is found, connection will be initiated automatically, and the result will be delivered via either the connected or connect_failed callback.</p>
<p>If a broker for a given scope has been configured with a static IP address and port, you can skip DNS-SD discovery by providing a static configuration:</p>
<p> 
<div class="code-tab-selector">
  <button id="button_5_c" class="code-tab-links" onclick="selectLanguage(event, '5', 'c')">C</button>
  <button id="button_5_cpp" class="code-tab-links" onclick="selectLanguage(event, '5', 'cpp')">C++</button>
</div>
<div id="div_5_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="comment">// Get configured static broker address</span></div>
<div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/struct_etc_pal_sock_addr.html">EtcPalSockAddr</a> static_broker_addr;</div>
<div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__inet.html#ga92ba01cb2c81a8a97b9555ecf0ab2fe5">etcpal_string_to_ip</a>(<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__inet.html#gga847282e3fd17bf75ec83292326c455eea73ea615eceba61f26d92a63f3738f635">kEtcPalIpTypeV4</a>, <span class="stringliteral">&quot;192.168.2.1&quot;</span>, &amp;static_broker_addr.<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/struct_etc_pal_sock_addr.html#a19cc8016f534a565f984438cfe911a9e">ip</a>);</div>
<div class="line">static_broker_addr.<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/struct_etc_pal_sock_addr.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a> = 8000;</div>
<div class="line"> </div>
<div class="line"><a class="code" href="struct_rdmnet_scope_config.html">RdmnetScopeConfig</a> config;</div>
<div class="line"><a class="code" href="group__rdmnet__api__common.html#ga500c0af02a2db3a6b835f26cf304da85">RDMNET_CLIENT_SET_STATIC_SCOPE</a>(&amp;config, <span class="stringliteral">&quot;my_custom_scope&quot;</span>, static_broker_addr);</div>
<div class="line"><span class="comment">// Or:</span></div>
<div class="line"><a class="code" href="group__rdmnet__api__common.html#gab2855ff14aba079140f1070f80140247">RDMNET_CLIENT_SET_STATIC_DEFAULT_SCOPE</a>(&amp;config, static_broker_addr);</div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__rdmnet__api__common.html#ga7244ab5c8edb8bc9c1e4792a6c64f798">rdmnet_client_scope_t</a> scope_handle;</div>
<div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__error.html#ga743b0648f0ca798ef29c9f69c6e255af">etcpal_error_t</a> result = <a class="code" href="group__rdmnet__ept__client.html#gaabb006c941893a84cf4727d672322a94">rdmnet_ept_client_add_scope</a>(my_ept_client_handle, &amp;config, &amp;scope_handle);</div>
<div class="ttc" id="agroup__etcpal__inet_html_ga92ba01cb2c81a8a97b9555ecf0ab2fe5"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__inet.html#ga92ba01cb2c81a8a97b9555ecf0ab2fe5">etcpal_string_to_ip</a></div><div class="ttdeci">etcpal_error_t etcpal_string_to_ip(etcpal_iptype_t type, const char *src, EtcPalIpAddr *dest)</div></div>
<div class="ttc" id="agroup__etcpal__inet_html_gga847282e3fd17bf75ec83292326c455eea73ea615eceba61f26d92a63f3738f635"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__inet.html#gga847282e3fd17bf75ec83292326c455eea73ea615eceba61f26d92a63f3738f635">kEtcPalIpTypeV4</a></div><div class="ttdeci">kEtcPalIpTypeV4</div></div>
<div class="ttc" id="agroup__rdmnet__api__common_html_ga500c0af02a2db3a6b835f26cf304da85"><div class="ttname"><a href="group__rdmnet__api__common.html#ga500c0af02a2db3a6b835f26cf304da85">RDMNET_CLIENT_SET_STATIC_SCOPE</a></div><div class="ttdeci">#define RDMNET_CLIENT_SET_STATIC_SCOPE(configptr, scope_str, broker_addr)</div><div class="ttdoc">Initialize an RdmnetScopeConfig struct with a scope string and static broker address.</div><div class="ttdef"><b>Definition:</b> client.h:295</div></div>
<div class="ttc" id="agroup__rdmnet__api__common_html_gab2855ff14aba079140f1070f80140247"><div class="ttname"><a href="group__rdmnet__api__common.html#gab2855ff14aba079140f1070f80140247">RDMNET_CLIENT_SET_STATIC_DEFAULT_SCOPE</a></div><div class="ttdeci">#define RDMNET_CLIENT_SET_STATIC_DEFAULT_SCOPE(configptr, broker_addr)</div><div class="ttdoc">Initialize an RdmnetScopeConfig struct with the default RDMnet scope and a static broker address.</div><div class="ttdef"><b>Definition:</b> client.h:312</div></div>
<div class="ttc" id="astruct_etc_pal_sock_addr_html"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/struct_etc_pal_sock_addr.html">EtcPalSockAddr</a></div></div>
<div class="ttc" id="astruct_etc_pal_sock_addr_html_a19cc8016f534a565f984438cfe911a9e"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/struct_etc_pal_sock_addr.html#a19cc8016f534a565f984438cfe911a9e">EtcPalSockAddr::ip</a></div><div class="ttdeci">EtcPalIpAddr ip</div></div>
<div class="ttc" id="astruct_etc_pal_sock_addr_html_a8e0798404bf2cf5dabb84c5ba9a4f236"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/struct_etc_pal_sock_addr.html#a8e0798404bf2cf5dabb84c5ba9a4f236">EtcPalSockAddr::port</a></div><div class="ttdeci">uint16_t port</div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_5_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="comment">// Get configured static broker address</span></div>
<div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_sock_addr.html">etcpal::SockAddr</a> static_broker_addr(<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_ip_addr.html#a431892e2354d1b617e2dd0278b8a9f30">etcpal::IpAddr::FromString</a>(<span class="stringliteral">&quot;192.168.2.1&quot;</span>), 8000);</div>
<div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_expected.html">etcpal::Expected&lt;rdmnet::ScopeHandle&gt;</a> add_res = ept_client.<a class="code" href="classrdmnet_1_1_ept_client.html#aebcb6c7c8d9b16280766525ca25b524b">AddScope</a>(<span class="stringliteral">&quot;my_custom_scope&quot;</span>, static_broker_addr);</div>
<div class="line"><span class="comment">// Or:</span></div>
<div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_expected.html">etcpal::Expected&lt;rdmnet::ScopeHandle&gt;</a> add_res = ept_client.<a class="code" href="classrdmnet_1_1_ept_client.html#a555b53b301e2b732058df8c0e805dc62">AddDefaultScope</a>(static_broker_addr);</div>
<div class="ttc" id="aclassetcpal_1_1_ip_addr_html_a431892e2354d1b617e2dd0278b8a9f30"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_ip_addr.html#a431892e2354d1b617e2dd0278b8a9f30">etcpal::IpAddr::FromString</a></div><div class="ttdeci">static IpAddr FromString(const char *ip_str) noexcept</div></div>
<div class="ttc" id="aclassetcpal_1_1_sock_addr_html"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_sock_addr.html">etcpal::SockAddr</a></div></div>
</div><!-- fragment --><p> 
</div>
</p>
<h1>Handling Callbacks</h1>
<p>The library will dispatch callback notifications from the background thread which is started when <a class="el" href="group__rdmnet__api__common.html#gac35e678c3cc099a73e9314614215e1d8" title="Initialize the RDMnet library.">rdmnet_init()</a> is called. It is safe to call any RDMnet API function from any callback; in fact, this is the recommended way of handling many callbacks.</p>
<p>For example, a very common EPT client behavior will be to fetch a client list from the broker after a successful connection:</p>
<p> 
<div class="code-tab-selector">
  <button id="button_6_c" class="code-tab-links" onclick="selectLanguage(event, '6', 'c')">C</button>
  <button id="button_6_cpp" class="code-tab-links" onclick="selectLanguage(event, '6', 'cpp')">C++</button>
</div>
<div id="div_6_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> ept_connected_callback(<a class="code" href="group__rdmnet__ept__client.html#gafe4439590493e7a8abedabc8de8ab51c">rdmnet_ept_client_t</a> client_handle, <a class="code" href="group__rdmnet__api__common.html#ga7244ab5c8edb8bc9c1e4792a6c64f798">rdmnet_client_scope_t</a> scope_handle,</div>
<div class="line">                            <span class="keyword">const</span> <a class="code" href="struct_rdmnet_client_connected_info.html">RdmnetClientConnectedInfo</a>* info, <span class="keywordtype">void</span>* context)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">char</span> addr_str[<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__inet.html#gacd7ec0d81e171166483c7629669bf05d">ETCPAL_IP_STRING_BYTES</a>];</div>
<div class="line">  <a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__inet.html#gaf98da0ae21f7960b5e046c55b8d79c4a">etcpal_ip_to_string</a>(&amp;info-&gt;<a class="code" href="struct_rdmnet_client_connected_info.html#a39d671dfd8919b93fe23dba6dbfba905">broker_addr</a>.<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/struct_etc_pal_sock_addr.html#a19cc8016f534a565f984438cfe911a9e">ip</a>, addr_str);</div>
<div class="line">  printf(<span class="stringliteral">&quot;Connected to broker &#39;%s&#39; at address %s:%d\n&quot;</span>, info-&gt;<a class="code" href="struct_rdmnet_client_connected_info.html#a09b4687edadab4b4334a33b38d00cf2f">broker_name</a>, addr_str, info-&gt;<a class="code" href="struct_rdmnet_client_connected_info.html#a39d671dfd8919b93fe23dba6dbfba905">broker_addr</a>.<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/struct_etc_pal_sock_addr.html#a8e0798404bf2cf5dabb84c5ba9a4f236">port</a>);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Check handles and/or context as necessary...</span></div>
<div class="line"> </div>
<div class="line">  <a class="code" href="group__rdmnet__ept__client.html#ga0614b05c349bde99fcac03b5b9ae54dd">rdmnet_ept_client_request_client_list</a>(client_handle, scope_handle);</div>
<div class="line">}                                   </div>
<div class="ttc" id="agroup__etcpal__inet_html_gacd7ec0d81e171166483c7629669bf05d"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__inet.html#gacd7ec0d81e171166483c7629669bf05d">ETCPAL_IP_STRING_BYTES</a></div><div class="ttdeci">#define ETCPAL_IP_STRING_BYTES</div></div>
<div class="ttc" id="agroup__etcpal__inet_html_gaf98da0ae21f7960b5e046c55b8d79c4a"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__inet.html#gaf98da0ae21f7960b5e046c55b8d79c4a">etcpal_ip_to_string</a></div><div class="ttdeci">etcpal_error_t etcpal_ip_to_string(const EtcPalIpAddr *src, char *dest)</div></div>
<div class="ttc" id="agroup__rdmnet__ept__client_html_ga0614b05c349bde99fcac03b5b9ae54dd"><div class="ttname"><a href="group__rdmnet__ept__client.html#ga0614b05c349bde99fcac03b5b9ae54dd">rdmnet_ept_client_request_client_list</a></div><div class="ttdeci">etcpal_error_t rdmnet_ept_client_request_client_list(rdmnet_ept_client_t client_handle, rdmnet_client_scope_t scope_handle)</div><div class="ttdoc">Request a client list from a broker.</div><div class="ttdef"><b>Definition:</b> ept_client.c:273</div></div>
<div class="ttc" id="astruct_rdmnet_client_connected_info_html"><div class="ttname"><a href="struct_rdmnet_client_connected_info.html">RdmnetClientConnectedInfo</a></div><div class="ttdoc">Information provided by the library about a successful RDMnet client connection.</div><div class="ttdef"><b>Definition:</b> client.h:151</div></div>
<div class="ttc" id="astruct_rdmnet_client_connected_info_html_a09b4687edadab4b4334a33b38d00cf2f"><div class="ttname"><a href="struct_rdmnet_client_connected_info.html#a09b4687edadab4b4334a33b38d00cf2f">RdmnetClientConnectedInfo::broker_name</a></div><div class="ttdeci">const char * broker_name</div><div class="ttdoc">The DNS name of the broker, if it was discovered using DNS-SD; otherwise an empty string.</div><div class="ttdef"><b>Definition:</b> client.h:155</div></div>
<div class="ttc" id="astruct_rdmnet_client_connected_info_html_a39d671dfd8919b93fe23dba6dbfba905"><div class="ttname"><a href="struct_rdmnet_client_connected_info.html#a39d671dfd8919b93fe23dba6dbfba905">RdmnetClientConnectedInfo::broker_addr</a></div><div class="ttdeci">EtcPalSockAddr broker_addr</div><div class="ttdoc">The IP address and port of the remote broker to which we have connected.</div><div class="ttdef"><b>Definition:</b> client.h:153</div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_6_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> MyEptNotifyHandler::HandleConnectedToBroker(<a class="code" href="classrdmnet_1_1_ept_client.html#a36b8fa2d0851a29b79c4ae6824484af6">rdmnet::EptClient::Handle</a> client_handle,</div>
<div class="line">                                                 <a class="code" href="group__rdmnet__cpp__common.html#gadf5994aa4727265c21622c5a0f997ceb">rdmnet::ScopeHandle</a> scope_handle,</div>
<div class="line">                                                 <span class="keyword">const</span> <a class="code" href="classrdmnet_1_1_client_connected_info.html">rdmnet::ClientConnectedInfo</a>&amp; info)</div>
<div class="line">{</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Connected to broker &#39;&quot;</span> &lt;&lt; info.<a class="code" href="classrdmnet_1_1_client_connected_info.html#a751d070cb4c1f89d838955298270b6cf">broker_name</a>()</div>
<div class="line">            &lt;&lt; <span class="stringliteral">&quot;&#39; at IP address &quot;</span> &lt;&lt; info.<a class="code" href="classrdmnet_1_1_client_connected_info.html#af30653fa66bd5b267c54cf81a8c7eb3d">broker_addr</a>().<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_sock_addr.html#a19c380b03cea21d7ac7325136a131ff0">ToString</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Check handles as necessary and get EPT client instance...</span></div>
<div class="line">  ept_client.<a class="code" href="classrdmnet_1_1_ept_client.html#a6afbaee81d5049431a8a6e0747c27b93">RequestClientList</a>(scope_handle);</div>
<div class="line">}</div>
<div class="ttc" id="aclassetcpal_1_1_sock_addr_html_a19c380b03cea21d7ac7325136a131ff0"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_sock_addr.html#a19c380b03cea21d7ac7325136a131ff0">etcpal::SockAddr::ToString</a></div><div class="ttdeci">std::string ToString() const</div></div>
<div class="ttc" id="aclassrdmnet_1_1_client_connected_info_html"><div class="ttname"><a href="classrdmnet_1_1_client_connected_info.html">rdmnet::ClientConnectedInfo</a></div><div class="ttdoc">Information about a successful connection to a broker delivered to an RDMnet callback function.</div><div class="ttdef"><b>Definition:</b> client.h:149</div></div>
<div class="ttc" id="aclassrdmnet_1_1_client_connected_info_html_a751d070cb4c1f89d838955298270b6cf"><div class="ttname"><a href="classrdmnet_1_1_client_connected_info.html#a751d070cb4c1f89d838955298270b6cf">rdmnet::ClientConnectedInfo::broker_name</a></div><div class="ttdeci">std::string broker_name() const</div><div class="ttdoc">Get the DNS name of the broker (if it was discovered via DNS-SD; otherwise this will be an empty stri...</div><div class="ttdef"><b>Definition:</b> client.h:184</div></div>
<div class="ttc" id="aclassrdmnet_1_1_client_connected_info_html_af30653fa66bd5b267c54cf81a8c7eb3d"><div class="ttname"><a href="classrdmnet_1_1_client_connected_info.html#af30653fa66bd5b267c54cf81a8c7eb3d">rdmnet::ClientConnectedInfo::broker_addr</a></div><div class="ttdeci">constexpr etcpal::SockAddr broker_addr() const noexcept</div><div class="ttdoc">Get the IP address and port of the remote broker to which we have connected.</div><div class="ttdef"><b>Definition:</b> client.h:178</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_client_html_a6afbaee81d5049431a8a6e0747c27b93"><div class="ttname"><a href="classrdmnet_1_1_ept_client.html#a6afbaee81d5049431a8a6e0747c27b93">rdmnet::EptClient::RequestClientList</a></div><div class="ttdeci">etcpal::Error RequestClientList(ScopeHandle scope_handle)</div><div class="ttdoc">Request a client list from a broker.</div><div class="ttdef"><b>Definition:</b> ept_client.h:275</div></div>
</div><!-- fragment --><p> 
</div>
</p>
<h2>Connection Failure</h2>
<p>It's worth noting connection failure as a special case here. RDMnet connections can fail for many reasons, including user misconfiguration, network misconfiguration, components starting up or shutting down, programming errors, and more.</p>
<p>The ClientConnectFailedInfo and ClientDisconnectedInfo structs passed back with the "connect failed" and "disconnected" callbacks respectively have comprehensive information about the failure, including enum values containing the library's categorization of the failure, protocol reason codes and socket errors where applicable. This information is typically used mostly for logging and debugging. Each of these codes has a respective <code>to_string()</code> function to aid in logging.</p>
<p>For programmatic use, the structs also contain a <code>will_retry</code> member which indicates whether the library plans to retry this connection in the background. The only circumstances under which the library will not retry is when a connection failure is determined to be either a programming error or a user misconfiguration. Some examples of these circumstances are:</p>
<ul>
<li>The broker explicitly rejected a connection with a reason code indicating a configuration error, such as <code>CONNECT_SCOPE_MISMATCH</code> or <code>CONNECT_DUPLICATE_UID</code>.</li>
<li>The library failed to create a network socket before the connection was initiated.</li>
</ul>
<h1>Discovering Other Clients</h1>
<p>To discover other EPT clients in RDMnet, you need to request a <em>Client List</em> from the broker you're connected to. In our API, this is very easy - as we saw in the callbacks section earlier, we can just call <a class="el" href="group__rdmnet__ept__client.html#ga0614b05c349bde99fcac03b5b9ae54dd" title="Request a client list from a broker.">rdmnet_ept_client_request_client_list()</a> or <a class="el" href="classrdmnet_1_1_ept_client.html#a6afbaee81d5049431a8a6e0747c27b93" title="Request a client list from a broker.">rdmnet::EptClient::RequestClientList()</a>. This sends the appropriate request to the broker, and the reply will come back in the "Client List Update" callback:</p>
<p> 
<div class="code-tab-selector">
  <button id="button_7_c" class="code-tab-links" onclick="selectLanguage(event, '7', 'c')">C</button>
  <button id="button_7_cpp" class="code-tab-links" onclick="selectLanguage(event, '7', 'cpp')">C++</button>
</div>
<div id="div_7_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> my_client_list_update_cb(<a class="code" href="group__rdmnet__ept__client.html#gafe4439590493e7a8abedabc8de8ab51c">rdmnet_ept_client_t</a> client_handle, <a class="code" href="group__rdmnet__api__common.html#ga7244ab5c8edb8bc9c1e4792a6c64f798">rdmnet_client_scope_t</a> scope_handle,</div>
<div class="line">                              <a class="code" href="group__rdmnet__api__common.html#ga47e9b8ab4e35d074085d3d9a91f77ac2">client_list_action_t</a> list_action, <span class="keyword">const</span> <a class="code" href="struct_rdmnet_ept_client_list.html">RdmnetEptClientList</a>* list, <span class="keywordtype">void</span>* context)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Check handles and/or context as necessary...</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (list_action)</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group__rdmnet__api__common.html#gga47e9b8ab4e35d074085d3d9a91f77ac2a28f365664cab7adfffbad8c478ca3a09">kRdmnetClientListAppend</a>:</div>
<div class="line">      <span class="comment">// These are new entries to be added to the list of clients. Append the new entry to our</span></div>
<div class="line">      <span class="comment">// bookkeeping.</span></div>
<div class="line">      add_new_clients(list-&gt;<a class="code" href="struct_rdmnet_ept_client_list.html#a3c76e64783b650c4253bc90f8c28b090">client_entries</a>, list-&gt;<a class="code" href="struct_rdmnet_ept_client_list.html#a4e70cc13f7c860f2f2e47f2d443a9414">num_client_entries</a>);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group__rdmnet__api__common.html#gga47e9b8ab4e35d074085d3d9a91f77ac2a62a9556be67db06e0fd26dbd5a20ff45">kRdmnetClientListRemove</a>:</div>
<div class="line">      <span class="comment">// These are entries to be removed from the list of clients. Remove the entry from our</span></div>
<div class="line">      <span class="comment">// bookkeeping.</span></div>
<div class="line">      remove_clients(list-&gt;<a class="code" href="struct_rdmnet_ept_client_list.html#a3c76e64783b650c4253bc90f8c28b090">client_entries</a>, list-&gt;<a class="code" href="struct_rdmnet_ept_client_list.html#a4e70cc13f7c860f2f2e47f2d443a9414">num_client_entries</a>);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group__rdmnet__api__common.html#gga47e9b8ab4e35d074085d3d9a91f77ac2a8401f8f58863ec76c40f9f1fd84d3440">kRdmnetClientListUpdate</a>:</div>
<div class="line">      <span class="comment">// These are entries to be updated in the list of clients. Update the corresponding entry</span></div>
<div class="line">      <span class="comment">// in our bookkeeping.</span></div>
<div class="line">      update_clients(list-&gt;<a class="code" href="struct_rdmnet_ept_client_list.html#a3c76e64783b650c4253bc90f8c28b090">client_entries</a>, list-&gt;<a class="code" href="struct_rdmnet_ept_client_list.html#a4e70cc13f7c860f2f2e47f2d443a9414">num_client_entries</a>);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group__rdmnet__api__common.html#gga47e9b8ab4e35d074085d3d9a91f77ac2a93835bbdfa444ea89287ecb5416b1704">kRdmnetClientListReplace</a>:</div>
<div class="line">      <span class="comment">// This is the full client list currently connected to the broker - our existing client </span></div>
<div class="line">      <span class="comment">// list should be replaced wholesale with this one. This will be the response to</span></div>
<div class="line">      <span class="comment">// rdmnet_ept_client_request_client_list(); the other cases are sent unsolicited.</span></div>
<div class="line">      replace_client_list(list-&gt;<a class="code" href="struct_rdmnet_ept_client_list.html#a3c76e64783b650c4253bc90f8c28b090">client_entries</a>, list-&gt;<a class="code" href="struct_rdmnet_ept_client_list.html#a4e70cc13f7c860f2f2e47f2d443a9414">num_client_entries</a>);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (list-&gt;<a class="code" href="struct_rdmnet_ept_client_list.html#a431174f9f4f6fd45a4178c5484f12415">more_coming</a>)</div>
<div class="line">  {</div>
<div class="line">    <span class="comment">// The library ran out of memory pool space while allocating client entries - after this</span></div>
<div class="line">    <span class="comment">// callback returns, another will be delivered with the continuation of this response.</span></div>
<div class="line">    <span class="comment">// If RDMNET_DYNAMIC_MEM == 1 (the default on non-embedded platforms), this flag will never be</span></div>
<div class="line">    <span class="comment">// set to true and does not need to be checked.</span></div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="agroup__rdmnet__api__common_html_ga47e9b8ab4e35d074085d3d9a91f77ac2"><div class="ttname"><a href="group__rdmnet__api__common.html#ga47e9b8ab4e35d074085d3d9a91f77ac2">client_list_action_t</a></div><div class="ttdeci">client_list_action_t</div><div class="ttdoc">How to apply the client entries to the existing client list in a client_list_update_received callback...</div><div class="ttdef"><b>Definition:</b> client.h:50</div></div>
<div class="ttc" id="agroup__rdmnet__api__common_html_gga47e9b8ab4e35d074085d3d9a91f77ac2a28f365664cab7adfffbad8c478ca3a09"><div class="ttname"><a href="group__rdmnet__api__common.html#gga47e9b8ab4e35d074085d3d9a91f77ac2a28f365664cab7adfffbad8c478ca3a09">kRdmnetClientListAppend</a></div><div class="ttdeci">@ kRdmnetClientListAppend</div><div class="ttdoc">The client entries should be appended to the existing client list.</div><div class="ttdef"><b>Definition:</b> client.h:52</div></div>
<div class="ttc" id="agroup__rdmnet__api__common_html_gga47e9b8ab4e35d074085d3d9a91f77ac2a62a9556be67db06e0fd26dbd5a20ff45"><div class="ttname"><a href="group__rdmnet__api__common.html#gga47e9b8ab4e35d074085d3d9a91f77ac2a62a9556be67db06e0fd26dbd5a20ff45">kRdmnetClientListRemove</a></div><div class="ttdeci">@ kRdmnetClientListRemove</div><div class="ttdoc">The client entries should be removed from the existing client list.</div><div class="ttdef"><b>Definition:</b> client.h:54</div></div>
<div class="ttc" id="agroup__rdmnet__api__common_html_gga47e9b8ab4e35d074085d3d9a91f77ac2a8401f8f58863ec76c40f9f1fd84d3440"><div class="ttname"><a href="group__rdmnet__api__common.html#gga47e9b8ab4e35d074085d3d9a91f77ac2a8401f8f58863ec76c40f9f1fd84d3440">kRdmnetClientListUpdate</a></div><div class="ttdeci">@ kRdmnetClientListUpdate</div><div class="ttdoc">The client entries should be updated in the existing client list.</div><div class="ttdef"><b>Definition:</b> client.h:56</div></div>
<div class="ttc" id="agroup__rdmnet__api__common_html_gga47e9b8ab4e35d074085d3d9a91f77ac2a93835bbdfa444ea89287ecb5416b1704"><div class="ttname"><a href="group__rdmnet__api__common.html#gga47e9b8ab4e35d074085d3d9a91f77ac2a93835bbdfa444ea89287ecb5416b1704">kRdmnetClientListReplace</a></div><div class="ttdeci">@ kRdmnetClientListReplace</div><div class="ttdoc">The existing client list should be replaced wholesale with this one.</div><div class="ttdef"><b>Definition:</b> client.h:58</div></div>
<div class="ttc" id="astruct_rdmnet_ept_client_list_html"><div class="ttname"><a href="struct_rdmnet_ept_client_list.html">RdmnetEptClientList</a></div><div class="ttdoc">A structure that represents a list of EPT Client Entries.</div><div class="ttdef"><b>Definition:</b> message.h:415</div></div>
<div class="ttc" id="astruct_rdmnet_ept_client_list_html_a3c76e64783b650c4253bc90f8c28b090"><div class="ttname"><a href="struct_rdmnet_ept_client_list.html#a3c76e64783b650c4253bc90f8c28b090">RdmnetEptClientList::client_entries</a></div><div class="ttdeci">RdmnetEptClientEntry * client_entries</div><div class="ttdoc">An array of EPT Client Entries.</div><div class="ttdef"><b>Definition:</b> message.h:417</div></div>
<div class="ttc" id="astruct_rdmnet_ept_client_list_html_a431174f9f4f6fd45a4178c5484f12415"><div class="ttname"><a href="struct_rdmnet_ept_client_list.html#a431174f9f4f6fd45a4178c5484f12415">RdmnetEptClientList::more_coming</a></div><div class="ttdeci">bool more_coming</div><div class="ttdoc">This message contains a partial list.</div><div class="ttdef"><b>Definition:</b> message.h:426</div></div>
<div class="ttc" id="astruct_rdmnet_ept_client_list_html_a4e70cc13f7c860f2f2e47f2d443a9414"><div class="ttname"><a href="struct_rdmnet_ept_client_list.html#a4e70cc13f7c860f2f2e47f2d443a9414">RdmnetEptClientList::num_client_entries</a></div><div class="ttdeci">size_t num_client_entries</div><div class="ttdoc">The size of the client_entries array.</div><div class="ttdef"><b>Definition:</b> message.h:419</div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_7_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> MyEptNotifyHandler::HandleClientListUpdate(<a class="code" href="classrdmnet_1_1_ept_client.html#a36b8fa2d0851a29b79c4ae6824484af6">rdmnet::EptClient::Handle</a> client_handle,</div>
<div class="line">                                                <a class="code" href="group__rdmnet__cpp__common.html#gadf5994aa4727265c21622c5a0f997ceb">rdmnet::ScopeHandle</a> scope_handle,</div>
<div class="line">                                                <a class="code" href="group__rdmnet__api__common.html#ga47e9b8ab4e35d074085d3d9a91f77ac2">client_list_action_t</a> list_action,</div>
<div class="line">                                                <span class="keyword">const</span> <a class="code" href="classrdmnet_1_1_ept_client_list.html">rdmnet::EptClientList</a>&amp; list)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Check handles as necessary...</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (list_action)</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group__rdmnet__api__common.html#gga47e9b8ab4e35d074085d3d9a91f77ac2a28f365664cab7adfffbad8c478ca3a09">kRdmnetClientListAppend</a>:</div>
<div class="line">      <span class="comment">// These are new entries to be added to the list of clients. Append the new entry to our</span></div>
<div class="line">      <span class="comment">// bookkeeping.</span></div>
<div class="line">      AddNewClients(list.<a class="code" href="classrdmnet_1_1_ept_client_list.html#a4a3dac5970f7c74e42009f8ef14b6de2">GetClientEntries</a>());</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group__rdmnet__api__common.html#gga47e9b8ab4e35d074085d3d9a91f77ac2a62a9556be67db06e0fd26dbd5a20ff45">kRdmnetClientListRemove</a>:</div>
<div class="line">      <span class="comment">// These are entries to be removed from the list of clients. Remove the entry from our</span></div>
<div class="line">      <span class="comment">// bookkeeping.</span></div>
<div class="line">      RemoveClients(list.<a class="code" href="classrdmnet_1_1_ept_client_list.html#a4a3dac5970f7c74e42009f8ef14b6de2">GetClientEntries</a>());</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group__rdmnet__api__common.html#gga47e9b8ab4e35d074085d3d9a91f77ac2a8401f8f58863ec76c40f9f1fd84d3440">kRdmnetClientListUpdate</a>:</div>
<div class="line">      <span class="comment">// These are entries to be updated in the list of clients. Update the corresponding entry</span></div>
<div class="line">      <span class="comment">// in our bookkeeping.</span></div>
<div class="line">      UpdateClients(list.<a class="code" href="classrdmnet_1_1_ept_client_list.html#a4a3dac5970f7c74e42009f8ef14b6de2">GetClientEntries</a>());</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group__rdmnet__api__common.html#gga47e9b8ab4e35d074085d3d9a91f77ac2a93835bbdfa444ea89287ecb5416b1704">kRdmnetClientListReplace</a>:</div>
<div class="line">      <span class="comment">// This is the full client list currently connected to the broker - our existing client </span></div>
<div class="line">      <span class="comment">// list should be replaced wholesale with this one. This will be the response to</span></div>
<div class="line">      <span class="comment">// EptClient::RequestClientList(); the other cases are sent unsolicited.</span></div>
<div class="line">      ReplaceClientList(list.<a class="code" href="classrdmnet_1_1_ept_client_list.html#a4a3dac5970f7c74e42009f8ef14b6de2">GetClientEntries</a>());</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (list.<a class="code" href="classrdmnet_1_1_ept_client_list.html#a4fab208b004476e6474cf439f668c3ae">more_coming</a>())</div>
<div class="line">  {</div>
<div class="line">    <span class="comment">// The library ran out of memory pool space while allocating client entries - after this</span></div>
<div class="line">    <span class="comment">// callback returns, another will be delivered with the continuation of this response.</span></div>
<div class="line">    <span class="comment">// If RDMNET_DYNAMIC_MEM == 1 (the default on non-embedded platforms), this flag will never be</span></div>
<div class="line">    <span class="comment">// set to true and does not need to be checked.</span></div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="aclassrdmnet_1_1_ept_client_list_html"><div class="ttname"><a href="classrdmnet_1_1_ept_client_list.html">rdmnet::EptClientList</a></div><div class="ttdoc">A list of EPT client entries.</div><div class="ttdef"><b>Definition:</b> ept_client.h:123</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_client_list_html_a4a3dac5970f7c74e42009f8ef14b6de2"><div class="ttname"><a href="classrdmnet_1_1_ept_client_list.html#a4a3dac5970f7c74e42009f8ef14b6de2">rdmnet::EptClientList::GetClientEntries</a></div><div class="ttdeci">std::vector&lt; EptClientEntry &gt; GetClientEntries() const</div><div class="ttdoc">Copy out the list of client entries.</div><div class="ttdef"><b>Definition:</b> ept_client.h:154</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_client_list_html_a4fab208b004476e6474cf439f668c3ae"><div class="ttname"><a href="classrdmnet_1_1_ept_client_list.html#a4fab208b004476e6474cf439f668c3ae">rdmnet::EptClientList::more_coming</a></div><div class="ttdeci">constexpr bool more_coming() const noexcept</div><div class="ttdoc">This message contains a partial list.</div><div class="ttdef"><b>Definition:</b> ept_client.h:169</div></div>
</div><!-- fragment --><p> 
</div>
</p>
<p>Brokers also send Client List Update messages asynchronously when things change; these messages contain only the differences from the last client list sent to a given controller. This means you should only have to request a full client list when a new connection completes; after that, expect periodic callbacks notifying you of changes, with the <a class="el" href="group__rdmnet__api__common.html#ga47e9b8ab4e35d074085d3d9a91f77ac2" title="How to apply the client entries to the existing client list in a client_list_update_received callback...">client_list_action_t</a> set appropriately as shown above.</p>
<p>Each EPT client entry structure contains a list of sub-protocols that client supports (along with its CID). This list should be checked for protocols that match those of the local EPT client to determine which clients you are interested in talking to. Make sure to save those clients' CIDs; that is the primary addressing identifier you will use to send data to them.</p>
<h1>Sending Data</h1>
<p>Send data to other EPT clients by providing the data, the EPT sub-protocol being used, and the destination client's CID.</p>
<p>The caller retains ownership of any data buffers supplied to the data sending API functions. See <a class="el" href="data_ownership.html">Data Ownership Paradigms in the RDMnet Library</a> for more information.</p>
<p> 
<div class="code-tab-selector">
  <button id="button_8_c" class="code-tab-links" onclick="selectLanguage(event, '8', 'c')">C</button>
  <button id="button_8_cpp" class="code-tab-links" onclick="selectLanguage(event, '8', 'cpp')">C++</button>
</div>
<div id="div_8_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/struct_etc_pal_uuid.html">EtcPalUuid</a> dest_cid = <span class="comment">/* The CID of the client we are sending the data to */</span>;</div>
<div class="line"> </div>
<div class="line">uint8_t data[20]; <span class="comment">// An arbitrary data buffer of arbitrary size</span></div>
<div class="line"><span class="comment">// Fill in data with some protocol-specific opaque data to send...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Send data for sub-protocol 1 to the client indicated by dest_cid</span></div>
<div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__error.html#ga743b0648f0ca798ef29c9f69c6e255af">etcpal_error_t</a> result = <a class="code" href="group__rdmnet__ept__client.html#ga86c921be6d2aac5dbbb3c66b207947a2">rdmnet_ept_client_send_data</a>(my_ept_client_handle, my_scope_handle, &amp;dest_cid,</div>
<div class="line">                                                    MY_ESTA_MANUFACTURER_ID, 1, data, 20);</div>
<div class="ttc" id="agroup__rdmnet__ept__client_html_ga86c921be6d2aac5dbbb3c66b207947a2"><div class="ttname"><a href="group__rdmnet__ept__client.html#ga86c921be6d2aac5dbbb3c66b207947a2">rdmnet_ept_client_send_data</a></div><div class="ttdeci">etcpal_error_t rdmnet_ept_client_send_data(rdmnet_ept_client_t client_handle, rdmnet_client_scope_t scope_handle, const EtcPalUuid *dest_cid, uint16_t manufacturer_id, uint16_t protocol_id, const uint8_t *data, size_t data_len)</div><div class="ttdoc">Send data from an EPT client on a scope.</div><div class="ttdef"><b>Definition:</b> ept_client.c:298</div></div>
<div class="ttc" id="astruct_etc_pal_uuid_html"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/struct_etc_pal_uuid.html">EtcPalUuid</a></div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_8_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="comment">// The CID of the client we are sending the data to</span></div>
<div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_uuid.html">etcpal::Uuid</a> dest_cid = <a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_uuid.html#ab017791f5f66829527591d8bd6bd840f">etcpal::Uuid::FromString</a>(<span class="stringliteral">&quot;7f0bb8b0-fead-40c0-b657-d92d39e57586&quot;</span>);</div>
<div class="line"> </div>
<div class="line">std::array&lt;uint8_t, 20&gt; data; <span class="comment">// An arbitrary data buffer of arbitrary size</span></div>
<div class="line"><span class="comment">// Fill in data with some protocol-specific opaque data to send...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Send data for sub-protocol 1 to the client indicated by dest_cid</span></div>
<div class="line"><a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_error.html">etcpal::Error</a> result = ept_client.<a class="code" href="classrdmnet_1_1_ept_client.html#ab64b62efe1efb21827dcc87d1059ceed">SendData</a>(my_scope_handle, dest_cid, MY_ESTA_MANUFACTURER_ID, 1,</div>
<div class="line">                                           data.data(), data.size());</div>
<div class="ttc" id="aclassetcpal_1_1_uuid_html_ab017791f5f66829527591d8bd6bd840f"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_uuid.html#ab017791f5f66829527591d8bd6bd840f">etcpal::Uuid::FromString</a></div><div class="ttdeci">static Uuid FromString(const char *uuid_str) noexcept</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_client_html_ab64b62efe1efb21827dcc87d1059ceed"><div class="ttname"><a href="classrdmnet_1_1_ept_client.html#ab64b62efe1efb21827dcc87d1059ceed">rdmnet::EptClient::SendData</a></div><div class="ttdeci">etcpal::Error SendData(ScopeHandle scope_handle, const etcpal::Uuid &amp;dest_cid, uint16_t manufacturer_id, uint16_t protocol_id, const uint8_t *data, size_t data_len)</div><div class="ttdoc">Send data from an EPT client on a scope.</div><div class="ttdef"><b>Definition:</b> ept_client.h:294</div></div>
</div><!-- fragment --><p> 
</div>
</p>
<h1>Handling Data</h1>
<p>EPT makes no distinction between requests and replies and has no method of correlating them; these features are up to sub-protocols to implement. When data arrives addressed to a local client, it will be delivered asynchronously through the "data received" callback.</p>
<p>Note that data received callbacks reference data buffers owned by the library, which will be invalid when the callback returns. See <a class="el" href="data_ownership.html">Data Ownership Paradigms in the RDMnet Library</a> for more information.</p>
<p> 
<div class="code-tab-selector">
  <button id="button_9_c" class="code-tab-links" onclick="selectLanguage(event, '9', 'c')">C</button>
  <button id="button_9_cpp" class="code-tab-links" onclick="selectLanguage(event, '9', 'cpp')">C++</button>
</div>
<div id="div_9_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> ept_data_received_callback(<a class="code" href="group__rdmnet__ept__client.html#gafe4439590493e7a8abedabc8de8ab51c">rdmnet_ept_client_t</a> client_handle, <a class="code" href="group__rdmnet__api__common.html#ga7244ab5c8edb8bc9c1e4792a6c64f798">rdmnet_client_scope_t</a> scope_handle,</div>
<div class="line">                                <span class="keyword">const</span> <a class="code" href="struct_rdmnet_ept_data.html">RdmnetEptData</a>* data, <a class="code" href="struct_rdmnet_sync_ept_response.html">RdmnetSyncEptResponse</a>* response, <span class="keywordtype">void</span>* context)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Check handles and/or context as necessary...</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">char</span> cid_str[<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__uuid.html#gabab14207e273082491f7be2a21275092">ETCPAL_UUID_STRING_BYTES</a>];</div>
<div class="line">  <a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__uuid.html#ga479b00b02ab33cf757e9476ad3286336">etcpal_uuid_to_string</a>(&amp;data-&gt;<a class="code" href="struct_rdmnet_ept_data.html#a3fe836dace9e08c161884ad21c8f26c6">source_cid</a>, cid_str);</div>
<div class="line">  printf(<span class="stringliteral">&quot;Got data from client %s for protocol %04x:%04x...\n&quot;</span>, cid_str, data-&gt;<a class="code" href="struct_rdmnet_ept_data.html#a6880f02c4ef621c6f6eff8e549514bb7">manufacturer_id</a>, data-&gt;<a class="code" href="struct_rdmnet_ept_data.html#a5129aa3cbcb00c91df302116d657b465">protocol_id</a>);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// data-&gt;data and data-&gt;data_len will point to the actual protocol-specific opaque-data.</span></div>
<div class="line">}</div>
<div class="ttc" id="agroup__etcpal__uuid_html_ga479b00b02ab33cf757e9476ad3286336"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__uuid.html#ga479b00b02ab33cf757e9476ad3286336">etcpal_uuid_to_string</a></div><div class="ttdeci">bool etcpal_uuid_to_string(const EtcPalUuid *uuid, char *buf)</div></div>
<div class="ttc" id="agroup__etcpal__uuid_html_gabab14207e273082491f7be2a21275092"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__uuid.html#gabab14207e273082491f7be2a21275092">ETCPAL_UUID_STRING_BYTES</a></div><div class="ttdeci">#define ETCPAL_UUID_STRING_BYTES</div></div>
<div class="ttc" id="astruct_rdmnet_ept_data_html"><div class="ttname"><a href="struct_rdmnet_ept_data.html">RdmnetEptData</a></div><div class="ttdoc">An RDMnet EPT data message received by a local component.</div><div class="ttdef"><b>Definition:</b> message.h:271</div></div>
<div class="ttc" id="astruct_rdmnet_ept_data_html_a3fe836dace9e08c161884ad21c8f26c6"><div class="ttname"><a href="struct_rdmnet_ept_data.html#a3fe836dace9e08c161884ad21c8f26c6">RdmnetEptData::source_cid</a></div><div class="ttdeci">EtcPalUuid source_cid</div><div class="ttdoc">The CID of the EPT client that sent this data.</div><div class="ttdef"><b>Definition:</b> message.h:273</div></div>
<div class="ttc" id="astruct_rdmnet_ept_data_html_a5129aa3cbcb00c91df302116d657b465"><div class="ttname"><a href="struct_rdmnet_ept_data.html#a5129aa3cbcb00c91df302116d657b465">RdmnetEptData::protocol_id</a></div><div class="ttdeci">uint16_t protocol_id</div><div class="ttdoc">The protocol ID that identifies the EPT sub-protocol.</div><div class="ttdef"><b>Definition:</b> message.h:277</div></div>
<div class="ttc" id="astruct_rdmnet_ept_data_html_a6880f02c4ef621c6f6eff8e549514bb7"><div class="ttname"><a href="struct_rdmnet_ept_data.html#a6880f02c4ef621c6f6eff8e549514bb7">RdmnetEptData::manufacturer_id</a></div><div class="ttdeci">uint16_t manufacturer_id</div><div class="ttdoc">The ESTA manufacturer ID that identifies the EPT sub-protocol.</div><div class="ttdef"><b>Definition:</b> message.h:275</div></div>
<div class="ttc" id="astruct_rdmnet_sync_ept_response_html"><div class="ttname"><a href="struct_rdmnet_sync_ept_response.html">RdmnetSyncEptResponse</a></div><div class="ttdoc">This structure should not be manipulated directly - use the macros to access it:</div><div class="ttdef"><b>Definition:</b> common.h:293</div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_9_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><a class="code" href="classrdmnet_1_1_ept_response_action.html">rdmnet::EptResponseAction</a> MyEptNotifyHandler::HandleEptData(<a class="code" href="classrdmnet_1_1_ept_client.html#a36b8fa2d0851a29b79c4ae6824484af6">rdmnet::EptClient::Handle</a> client_handle,</div>
<div class="line">                                                            <a class="code" href="group__rdmnet__cpp__common.html#gadf5994aa4727265c21622c5a0f997ceb">rdmnet::ScopeHandle</a> scope_handle,</div>
<div class="line">                                                            <span class="keyword">const</span> <a class="code" href="classrdmnet_1_1_ept_data.html">rdmnet::EptData</a>&amp; data)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Check handles as necessary...</span></div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Got data from client &quot;</span> &lt;&lt; data.<a class="code" href="classrdmnet_1_1_ept_data.html#a953220dfdd8a88b3275b73ed2e8d03bb">source_cid</a>().<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_uuid.html#a19c380b03cea21d7ac7325136a131ff0">ToString</a>()</div>
<div class="line">            &lt;&lt; <span class="stringliteral">&quot; for protocol &quot;</span> &lt;&lt; data.<a class="code" href="classrdmnet_1_1_ept_data.html#a8d7fa5dee2b4e5c2a27bf9fca7cc200f">manufacturer_id</a>() &lt;&lt; <span class="charliteral">&#39;:&#39;</span> &lt;&lt; data.<a class="code" href="classrdmnet_1_1_ept_data.html#af663a739f8d7204b92c6627aac770c34">protocol_id</a>() &lt;&lt; <span class="stringliteral">&quot;...\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// data.data() and data.data_len() will point to the actual protocol-specific opaque data.</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// More on this below...</span></div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="classrdmnet_1_1_ept_response_action.html#a549151dc877bdd04a443a5016fd25a13">rdmnet::EptResponseAction::DeferResponse</a>();</div>
<div class="line">}</div>
<div class="ttc" id="aclassetcpal_1_1_uuid_html_a19c380b03cea21d7ac7325136a131ff0"><div class="ttname"><a href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_uuid.html#a19c380b03cea21d7ac7325136a131ff0">etcpal::Uuid::ToString</a></div><div class="ttdeci">std::string ToString() const</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_data_html"><div class="ttname"><a href="classrdmnet_1_1_ept_data.html">rdmnet::EptData</a></div><div class="ttdoc">An EPT data message received over RDMnet and delivered to an RDMnet callback function.</div><div class="ttdef"><b>Definition:</b> ept_data.h:41</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_data_html_a8d7fa5dee2b4e5c2a27bf9fca7cc200f"><div class="ttname"><a href="classrdmnet_1_1_ept_data.html#a8d7fa5dee2b4e5c2a27bf9fca7cc200f">rdmnet::EptData::manufacturer_id</a></div><div class="ttdeci">constexpr uint16_t manufacturer_id() const noexcept</div><div class="ttdoc">Get the ESTA manufacturer ID that identifies the EPT sub-protocol.</div><div class="ttdef"><b>Definition:</b> ept_data.h:117</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_data_html_a953220dfdd8a88b3275b73ed2e8d03bb"><div class="ttname"><a href="classrdmnet_1_1_ept_data.html#a953220dfdd8a88b3275b73ed2e8d03bb">rdmnet::EptData::source_cid</a></div><div class="ttdeci">constexpr etcpal::Uuid source_cid() const noexcept</div><div class="ttdoc">Get the CID of the EPT client that sent this data.</div><div class="ttdef"><b>Definition:</b> ept_data.h:111</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_data_html_af663a739f8d7204b92c6627aac770c34"><div class="ttname"><a href="classrdmnet_1_1_ept_data.html#af663a739f8d7204b92c6627aac770c34">rdmnet::EptData::protocol_id</a></div><div class="ttdeci">constexpr uint16_t protocol_id() const noexcept</div><div class="ttdoc">Get the protocol ID that identifies the EPT sub-protocol.</div><div class="ttdef"><b>Definition:</b> ept_data.h:123</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_response_action_html"><div class="ttname"><a href="classrdmnet_1_1_ept_response_action.html">rdmnet::EptResponseAction</a></div><div class="ttdoc">A class representing a synchronous action to take in response to a received EPT data message.</div><div class="ttdef"><b>Definition:</b> common.h:166</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_response_action_html_a549151dc877bdd04a443a5016fd25a13"><div class="ttname"><a href="classrdmnet_1_1_ept_response_action.html#a549151dc877bdd04a443a5016fd25a13">rdmnet::EptResponseAction::DeferResponse</a></div><div class="ttdeci">static EptResponseAction DeferResponse()</div><div class="ttdoc">Defer the response to the EPT message, either to be sent later or because no response is necessary.</div><div class="ttdef"><b>Definition:</b> common.h:198</div></div>
</div><!-- fragment --><p> 
</div>
</p>
<h2>Responding Synchronously to EPT Data</h2>
<p>If you receive EPT data that motivates a response, and you can access the data with which to respond relatively quickly from the code path of the notification callback, it's convenient to respond synchronously. The EPT data received notification callbacks provide a way to set the response information directly from the callback, which the library will use to send a response after the callback returns.</p>
<p><em>Important note: Do not do this when accessing response data may block for a significant time.</em></p>
<p>When responding with EPT data, it should be copied into the buffer that was provided when the EPT client handle was created, before returning from the callback function. All notifications for any given RDMnet handle are delivered from the same thread, so accesses to this buffer from the callback context are thread-safe.</p>
<p>After copying the data, use the API-specific method to indicate that data should be sent in response as shown below.</p>
<p> 
<div class="code-tab-selector">
  <button id="button_10_c" class="code-tab-links" onclick="selectLanguage(event, '10', 'c')">C</button>
  <button id="button_10_cpp" class="code-tab-links" onclick="selectLanguage(event, '10', 'cpp')">C++</button>
</div>
<div id="div_10_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="comment">// This buffer was provided as part of the RdmnetEptClientConfig when the device handle was created.</span></div>
<div class="line"><span class="keyword">static</span> uint8_t my_ept_response_buf[MY_MAX_RESPONSE_SIZE];</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> ept_data_received_callback(<a class="code" href="group__rdmnet__ept__client.html#gafe4439590493e7a8abedabc8de8ab51c">rdmnet_ept_client_t</a> client_handle, <a class="code" href="group__rdmnet__api__common.html#ga7244ab5c8edb8bc9c1e4792a6c64f798">rdmnet_client_scope_t</a> scope_handle,</div>
<div class="line">                                <span class="keyword">const</span> <a class="code" href="struct_rdmnet_ept_data.html">RdmnetEptData</a>* data, <a class="code" href="struct_rdmnet_sync_ept_response.html">RdmnetSyncEptResponse</a>* response, <span class="keywordtype">void</span>* context)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// After determining that the message requires a response...</span></div>
<div class="line">  memcpy(my_ept_response_buf, my_response_data, RESPONSE_DATA_SIZE);</div>
<div class="line">  <a class="code" href="group__rdmnet__api__common.html#ga5075bf8b8590d72ad8f2626eb4b19bb9">RDMNET_SYNC_SEND_EPT_DATA</a>(response, RESPONSE_DATA_SIZE);</div>
<div class="line">  <span class="comment">// Data will be sent after this function returns.</span></div>
<div class="line">}</div>
<div class="ttc" id="agroup__rdmnet__api__common_html_ga5075bf8b8590d72ad8f2626eb4b19bb9"><div class="ttname"><a href="group__rdmnet__api__common.html#ga5075bf8b8590d72ad8f2626eb4b19bb9">RDMNET_SYNC_SEND_EPT_DATA</a></div><div class="ttdeci">#define RDMNET_SYNC_SEND_EPT_DATA(response_ptr, response_data_len_in)</div><div class="ttdoc">Indicate that an EPT data message should be sent when this callback returns.</div><div class="ttdef"><b>Definition:</b> common.h:318</div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_10_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="comment">// This buffer was provided as part of the EptClient::Settings when the EptClient instance</span></div>
<div class="line"><span class="comment">// was initialized.</span></div>
<div class="line"><span class="keyword">static</span> uint8_t my_ept_response_buf[kMyMaxResponseSize];</div>
<div class="line"> </div>
<div class="line"><a class="code" href="classrdmnet_1_1_ept_response_action.html">rdmnet::EptResponseAction</a> MyEptNotifyHander::HandleEptData(<a class="code" href="classrdmnet_1_1_ept_client.html#a36b8fa2d0851a29b79c4ae6824484af6">rdmnet::EptClient::Handle</a> client_handle,</div>
<div class="line">                                                           <a class="code" href="group__rdmnet__cpp__common.html#gadf5994aa4727265c21622c5a0f997ceb">rdmnet::ScopeHandle</a> scope_handle,</div>
<div class="line">                                                           <span class="keyword">const</span> <a class="code" href="classrdmnet_1_1_ept_data.html">rdmnet::EptData</a>&amp; data)</div>
<div class="line">{</div>
<div class="line">  std::memcpy(my_ept_response_buf, my_response_data, kResponseDataSize);</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="classrdmnet_1_1_ept_response_action.html#ac648b8c90bc48b9d7982b5daee8e2b60">rdmnet::EptResponseAction::SendData</a>(kResponseDataSize);</div>
<div class="line">}</div>
<div class="ttc" id="aclassrdmnet_1_1_ept_response_action_html_ac648b8c90bc48b9d7982b5daee8e2b60"><div class="ttname"><a href="classrdmnet_1_1_ept_response_action.html#ac648b8c90bc48b9d7982b5daee8e2b60">rdmnet::EptResponseAction::SendData</a></div><div class="ttdeci">static EptResponseAction SendData(size_t response_data_len)</div><div class="ttdoc">Send an EPT data message in response.</div><div class="ttdef"><b>Definition:</b> common.h:181</div></div>
</div><!-- fragment --><p> 
</div>
</p>
<h2>Responding Asynchronously or Not Responding</h2>
<p>If EPT data does not require a response, or if you choose to defer the response to be sent at a later time, this can be indicated in the data received callback as well. Note that if you want to save the EPT data you received, it must be copied out (data delivered to callbacks is still owned by the library). There are RDMnet API functions to save EPT data using heap allocation; you can also use your own method of saving the data.</p>
<p> 
<div class="code-tab-selector">
  <button id="button_11_c" class="code-tab-links" onclick="selectLanguage(event, '11', 'c')">C</button>
  <button id="button_11_cpp" class="code-tab-links" onclick="selectLanguage(event, '11', 'cpp')">C++</button>
</div>
<div id="div_11_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> ept_data_received_callback(<a class="code" href="group__rdmnet__ept__client.html#gafe4439590493e7a8abedabc8de8ab51c">rdmnet_ept_client_t</a> client_handle, <a class="code" href="group__rdmnet__api__common.html#ga7244ab5c8edb8bc9c1e4792a6c64f798">rdmnet_client_scope_t</a> scope_handle,</div>
<div class="line">                                <span class="keyword">const</span> <a class="code" href="struct_rdmnet_ept_data.html">RdmnetEptData</a>* data, <a class="code" href="struct_rdmnet_sync_ept_response.html">RdmnetSyncEptResponse</a>* response, <span class="keywordtype">void</span>* context)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// RdmnetEptData structures do not own their data and the data will be invalid when this callback</span></div>
<div class="line">  <span class="comment">// returns. To save the data for later processing:</span></div>
<div class="line">  <a class="code" href="struct_rdmnet_saved_ept_data.html">RdmnetSavedEptData</a> saved_data;</div>
<div class="line">  <a class="code" href="group__rdmnet__api__common.html#gaa415286760ac23790d49a89bcc75c5ea">rdmnet_save_ept_data</a>(&amp;data, &amp;saved_data);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// This structure must then be freed before going out of scope, using rdmnet_free_saved_ept_data().</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// response will be set to take no action (DEFER_RESPONSE) by default, so no action is necessary</span></div>
<div class="line">  <span class="comment">// here.</span></div>
<div class="line">}</div>
<div class="ttc" id="agroup__rdmnet__api__common_html_gaa415286760ac23790d49a89bcc75c5ea"><div class="ttname"><a href="group__rdmnet__api__common.html#gaa415286760ac23790d49a89bcc75c5ea">rdmnet_save_ept_data</a></div><div class="ttdeci">etcpal_error_t rdmnet_save_ept_data(const RdmnetEptData *data, RdmnetSavedEptData *saved_data)</div><div class="ttdoc">Save the data in a received EPT data message for later use from a different context.</div><div class="ttdef"><b>Definition:</b> message.c:323</div></div>
<div class="ttc" id="astruct_rdmnet_saved_ept_data_html"><div class="ttname"><a href="struct_rdmnet_saved_ept_data.html">RdmnetSavedEptData</a></div><div class="ttdoc">An EPT data message received over RDMnet and saved for later processing.</div><div class="ttdef"><b>Definition:</b> message.h:292</div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_11_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><a class="code" href="classrdmnet_1_1_ept_response_action.html">rdmnet::EptResponseAction</a> MyEptNotifyHandler::HandleEptData(<a class="code" href="classrdmnet_1_1_ept_client.html#a36b8fa2d0851a29b79c4ae6824484af6">rdmnet::EptClient::Handle</a> client_handle,</div>
<div class="line">                                                            <a class="code" href="group__rdmnet__cpp__common.html#gadf5994aa4727265c21622c5a0f997ceb">rdmnet::ScopeHandle</a> scope_handle,</div>
<div class="line">                                                            <span class="keyword">const</span> <a class="code" href="classrdmnet_1_1_ept_data.html">rdmnet::EptData</a>&amp; data)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// EptData structures do not own their data and the data will be invalid when this callback</span></div>
<div class="line">  <span class="comment">// returns. To save the data for later processing, you can save the entire structure with its</span></div>
<div class="line">  <span class="comment">// addressing data:</span></div>
<div class="line">  <a class="code" href="classrdmnet_1_1_saved_ept_data.html">rdmnet::SavedEptData</a> saved_data = data.<a class="code" href="classrdmnet_1_1_ept_data.html#ac6016bf32c210897a6a47f0262152e9c">Save</a>();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Or to just save the opaque data:</span></div>
<div class="line">  std::vector&lt;uint8_t&gt; saved_data = data.<a class="code" href="classrdmnet_1_1_ept_data.html#a0ad6e38f7e2047f51194be39eccb7056">CopyData</a>();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Indicate that we will take no response action directly from this callback.</span></div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="classrdmnet_1_1_ept_response_action.html#a549151dc877bdd04a443a5016fd25a13">rdmnet::EptResponseAction::DeferResponse</a>();</div>
<div class="line">}</div>
<div class="ttc" id="aclassrdmnet_1_1_ept_data_html_a0ad6e38f7e2047f51194be39eccb7056"><div class="ttname"><a href="classrdmnet_1_1_ept_data.html#a0ad6e38f7e2047f51194be39eccb7056">rdmnet::EptData::CopyData</a></div><div class="ttdeci">std::vector&lt; uint8_t &gt; CopyData() const</div><div class="ttdoc">Copy the data out of an EPT data message.</div><div class="ttdef"><b>Definition:</b> ept_data.h:149</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_data_html_ac6016bf32c210897a6a47f0262152e9c"><div class="ttname"><a href="classrdmnet_1_1_ept_data.html#ac6016bf32c210897a6a47f0262152e9c">rdmnet::EptData::Save</a></div><div class="ttdeci">SavedEptData Save() const</div><div class="ttdoc">Save this data message for later use from a different context.</div><div class="ttdef"><b>Definition:</b> ept_data.h:165</div></div>
<div class="ttc" id="aclassrdmnet_1_1_saved_ept_data_html"><div class="ttname"><a href="classrdmnet_1_1_saved_ept_data.html">rdmnet::SavedEptData</a></div><div class="ttdoc">An EPT data message received over RDMnet and saved for later processing.</div><div class="ttdef"><b>Definition:</b> ept_data.h:76</div></div>
</div><!-- fragment --><p> 
</div>
</p>
<h1>Handling EPT Status Messages</h1>
<p>If something went wrong while a broker or an EPT client was processing your message, you will get a response called an "EPT Status". There is a separate callback for handling these messages.</p>
<p> 
<div class="code-tab-selector">
  <button id="button_12_c" class="code-tab-links" onclick="selectLanguage(event, '12', 'c')">C</button>
  <button id="button_12_cpp" class="code-tab-links" onclick="selectLanguage(event, '12', 'cpp')">C++</button>
</div>
<div id="div_12_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> ept_status_callback(<a class="code" href="group__rdmnet__ept__client.html#gafe4439590493e7a8abedabc8de8ab51c">rdmnet_ept_client_t</a> client_handle, <a class="code" href="group__rdmnet__api__common.html#ga7244ab5c8edb8bc9c1e4792a6c64f798">rdmnet_client_scope_t</a> scope_handle,</div>
<div class="line">                         <span class="keyword">const</span> <a class="code" href="struct_rdmnet_ept_status.html">RdmnetEptStatus</a>* status, <span class="keywordtype">void</span>* context)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Check handles and/or context as necessary...</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">char</span> cid_str[<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__uuid.html#gabab14207e273082491f7be2a21275092">ETCPAL_UUID_STRING_BYTES</a>];</div>
<div class="line">  <a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/group__etcpal__uuid.html#ga479b00b02ab33cf757e9476ad3286336">etcpal_uuid_to_string</a>(&amp;status-&gt;<a class="code" href="struct_rdmnet_ept_status.html#a0393a00733c2f0a144f436dd1fcb8456">source_cid</a>, cid_str);</div>
<div class="line">  printf(<span class="stringliteral">&quot;Error sending EPT data to component %s: &#39;%s&#39;\n&quot;</span>, cid_str,</div>
<div class="line">         <a class="code" href="group__rdmnet__api__common.html#ga1d378dff587acdfa8306c1075e316f4a">rdmnet_ept_status_code_to_string</a>(status-&gt;<a class="code" href="struct_rdmnet_ept_status.html#ad2e681d1a760b87719d5192727b91e60">status_code</a>));</div>
<div class="line">}</div>
<div class="ttc" id="agroup__rdmnet__api__common_html_ga1d378dff587acdfa8306c1075e316f4a"><div class="ttname"><a href="group__rdmnet__api__common.html#ga1d378dff587acdfa8306c1075e316f4a">rdmnet_ept_status_code_to_string</a></div><div class="ttdeci">const char * rdmnet_ept_status_code_to_string(ept_status_code_t code)</div><div class="ttdoc">Get a string representation of an EPT status code.</div><div class="ttdef"><b>Definition:</b> common.c:250</div></div>
<div class="ttc" id="astruct_rdmnet_ept_status_html"><div class="ttname"><a href="struct_rdmnet_ept_status.html">RdmnetEptStatus</a></div><div class="ttdoc">An RDMnet EPT status message received by a local component.</div><div class="ttdef"><b>Definition:</b> message.h:310</div></div>
<div class="ttc" id="astruct_rdmnet_ept_status_html_a0393a00733c2f0a144f436dd1fcb8456"><div class="ttname"><a href="struct_rdmnet_ept_status.html#a0393a00733c2f0a144f436dd1fcb8456">RdmnetEptStatus::source_cid</a></div><div class="ttdeci">EtcPalUuid source_cid</div><div class="ttdoc">The CID of the EPT client that sent this status message.</div><div class="ttdef"><b>Definition:</b> message.h:312</div></div>
<div class="ttc" id="astruct_rdmnet_ept_status_html_ad2e681d1a760b87719d5192727b91e60"><div class="ttname"><a href="struct_rdmnet_ept_status.html#ad2e681d1a760b87719d5192727b91e60">RdmnetEptStatus::status_code</a></div><div class="ttdeci">ept_status_code_t status_code</div><div class="ttdoc">A status code that indicates the specific error or status condition.</div><div class="ttdef"><b>Definition:</b> message.h:314</div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_12_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> MyEptNotifyHandler::HandleEptStatus(<a class="code" href="classrdmnet_1_1_ept_client.html#a36b8fa2d0851a29b79c4ae6824484af6">rdmnet::EptClient::Handle</a> client_handle,</div>
<div class="line">                                         <a class="code" href="group__rdmnet__cpp__common.html#gadf5994aa4727265c21622c5a0f997ceb">rdmnet::ScopeHandle</a> scope_handle,</div>
<div class="line">                                         <span class="keyword">const</span> <a class="code" href="classrdmnet_1_1_ept_status.html">rdmnet::EptStatus</a>&amp; status)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// Check handles as necessary...</span></div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Error sending EPT data to component &quot;</span> &lt;&lt; status.<a class="code" href="classrdmnet_1_1_ept_status.html#abee5c6ea63d7dc369301cc5dda8393d9">source_cid</a>().<a class="codeRef" href="https://etclabs.github.io/EtcPalDocs/head/classetcpal_1_1_uuid.html#a19c380b03cea21d7ac7325136a131ff0">ToString</a>() &lt;&lt; <span class="stringliteral">&quot;: &#39;&quot;</span></div>
<div class="line">            &lt;&lt; status.<a class="code" href="classrdmnet_1_1_ept_status.html#a3c9c36a852d314a02f05d6e98a261c18">CodeToString</a>() &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>;</div>
<div class="line">}</div>
<div class="ttc" id="aclassrdmnet_1_1_ept_status_html"><div class="ttname"><a href="classrdmnet_1_1_ept_status.html">rdmnet::EptStatus</a></div><div class="ttdoc">An EPT status message received over RDMnet and delivered to an RDMnet callback function.</div><div class="ttdef"><b>Definition:</b> ept_status.h:41</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_status_html_a3c9c36a852d314a02f05d6e98a261c18"><div class="ttname"><a href="classrdmnet_1_1_ept_status.html#a3c9c36a852d314a02f05d6e98a261c18">rdmnet::EptStatus::CodeToString</a></div><div class="ttdeci">std::string CodeToString() const</div><div class="ttdoc">Convert the status message's code to a string representation.</div><div class="ttdef"><b>Definition:</b> ept_status.h:135</div></div>
<div class="ttc" id="aclassrdmnet_1_1_ept_status_html_abee5c6ea63d7dc369301cc5dda8393d9"><div class="ttname"><a href="classrdmnet_1_1_ept_status.html#abee5c6ea63d7dc369301cc5dda8393d9">rdmnet::EptStatus::source_cid</a></div><div class="ttdeci">constexpr etcpal::Uuid source_cid() const noexcept</div><div class="ttdoc">Get the CID of the EPT client that sent this status message.</div><div class="ttdef"><b>Definition:</b> ept_status.h:105</div></div>
</div><!-- fragment --><p> 
</div>
 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="getting_started.html">Getting Started</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
