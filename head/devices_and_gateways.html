<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RDMnet: Devices and Gateways</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="etclibtool.css" rel="stylesheet" type="text/css"/>
<link href="rdmnet_dox_styles.css" rel="stylesheet" type="text/css"/>
<!-- BEGIN CUSTOM SCRIPTS -->
<!-- BEGIN ETCLIBTOOL VERSION SELECTOR SCRIPT -->
<script type="text/javascript">
  $(function () {
    $.get('/RDMnetDocs/versions.txt', function (data) {
      if (data) {
        var lines = data.split('\n');
        if (lines.length > 0) {
          var version_select = $("#version_select").empty();
          lines.forEach(function (line) {
            line = line.trim();
            if (!line) {
              return;
            }
            line = line.split(':');
            var option_name = line[0].replace(/^v/, '');
            if (line.length > 1) {
              option_name += ' (' + line[1] + ')';
            }
            var option_val = '/RDMnetDocs/' + line[0];
            var option = $('<option></option>').attr("value", option_val)
              .text(option_name);
            if (window.location.pathname.match(line[0])) {
              option = option.attr("selected", "selected");
            }
            version_select.append(option);
          });
        }
      }
    }, 'text');
  });
</script>
<!-- END ETCLIBTOOL VERSION SELECTOR SCRIPT -->
<script type="text/javascript">
  $(function () { selectAllC() });
</script>
<script type="text/javascript">
  function selectAllC() {
    // Enable all C-language blocks
    var tabcontent = document.getElementsByClassName("code-tab-content");
    for (i = 0; i < tabcontent.length; i++) {
      if (tabcontent[i].id.endsWith("_c")) {
        tabcontent[i].style.display = "block";
      } else {
        tabcontent[i].style.display = "none"
      }
    }
    // Enable all C-language buttons
    var tablinks = document.getElementsByClassName("code-tab-links");
    for (i = 0; i < tablinks.length; i++) {
      if (tablinks[i].id.endsWith("_c")) {
        if (!tablinks[i].className.includes("active")) {
          tablinks[i].className = tablinks[i].className += " active";
        }
      } else {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
    }
  }
  function selectAllCpp() {
    // Enable all C++-language blocks
    var tabcontent = document.getElementsByClassName("code-tab-content");
    for (i = 0; i < tabcontent.length; i++) {
      if (tabcontent[i].id.endsWith("_cpp")) {
        tabcontent[i].style.display = "block";
      } else {
        tabcontent[i].style.display = "none"
      }
    }
    // Enable all C++-language buttons
    var tablinks = document.getElementsByClassName("code-tab-links");
    for (i = 0; i < tablinks.length; i++) {
      if (tablinks[i].id.endsWith("_cpp")) {
        if (!tablinks[i].className.includes("active")) {
          tablinks[i].className = tablinks[i].className += " active";
        }
      } else {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
    }
  }
  function selectLanguage(evt, block_id, language) {
    // Get all elements with class="tabcontent" and hide them
    var tabcontent = document.getElementsByClassName("code-tab-content");
    for (i = 0; i < tabcontent.length; i++) {
      if (tabcontent[i].id.startsWith("div_" + block_id)) {
        tabcontent[i].style.display = "none";
      }
    }
    // Get all elements with class="tablinks" and remove the class "active"
    var tablinks = document.getElementsByClassName("code-tab-links");
    for (i = 0; i < tablinks.length; i++) {
      if (tablinks[i].id.startsWith("button_" + block_id)) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
    }
    // Show the current tab, and add an "active" class to the button that opened the tab
    document.getElementById("div_" + block_id + "_" + language).style.display = "block";
    if (!evt.currentTarget.className.includes("active")) {
      evt.currentTarget.className += " active";
    }
  }
</script>
<!-- END CUSTOM SCRIPTS -->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RDMnet
   &#160;<span id="projectnumber">HEAD (unstable)</span>
   </div>
   <div id="projectbrief">Implementation of ANSI E1.33 (RDMnet)</div>
  </td>
  <!-- BEGIN VERSION SELECTOR INSERTED BY ETCLIBTOOL -->
  <td style="text-align: right; padding-right: 0.5em">
    <div id="otherversions">
      View other versions:
      <select id="version_select" onchange="location = this.value">
      </select>
    </div>
  </td>
  <!-- END VERSION SELECTOR INSERTED BY ETCLIBTOOL -->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('devices_and_gateways.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Devices and Gateways </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__tmp_tmpos552282_docs_how_rdmnet_works_devices_and_gateways"></a></p>
<p> 
<div class="code-tab-page-selector">
  <button id="button_1_c" class="code-tab-links" onclick="selectAllC()">Show All C Snippets</button>
  <button id="button_1_cpp" class="code-tab-links" onclick="selectAllCpp()">Show All C++ Snippets</button>
</div>
</p>
<p>RDMnet is closely tied to Streaming ACN (ANSI E1.31, aka sACN); RDMnet devices are often also senders or receivers of sACN. Typically, sACN is used for live control data, whereas RDMnet is used for "pre-show" configuration. This pairing between the two protocols motivates RDMnet's model of a device.</p>
<h1>Modeling an RDMnet Device</h1>
<p>Devices can be thought of as containing a set of RDM responders, each of which accepts some RDM configuration. Every device has a special RDM responder known as the <em>Default Responder</em> which represents the top-level configuration data about the device - its name, manufacturer, IP addressing information, etc.</p>
<p>If a device only implements RDMnet, not RDM or sACN, the default responder is all that's needed; it can contain all of the RDMnet-configurable information about the device. But when a device starts interacting with sACN or RDM, things get a bit more complex.</p>
<h2>Endpoints</h2>
<p>Consider the example of a 2-port DMX/RDM gateway:</p>
<p><img src="2_port_gateway.png" alt="" class="inline" title="A 2-port DMX/RDM Gateway"/></p>
<p>One of the main ways RDMnet adds value is by providing a standard way of interfacing with RDM responders through gateways. Each port on the two-port gateway is represented by an <em>endpoint</em> in the RDMnet protocol. RDM responders are associated with endpoints; this association represents which gateway port they are connected to.</p>
<p>ANSI E1.37-7, an extension to RDM, provides RDM messages for getting information about RDMnet gateways. The <code>ENDPOINT_LIST</code> message is used to retrieve a list of endpoints on a gateway, and the <code>ENDPOINT_RESPONDERS</code> message is used to get a list of RDM responders on each endpoint.</p>
<p>Every RDM responder except for the default responder is associated with an endpoint. Endpoint numbers are 16-bit values, starting at 1. To address a responder on an endpoint, you must include the endpoint number in the RDMnet message. When addressing the default responder, this field is set to a reserved value, <code>NULL_ENDPOINT</code> (0).</p>
<p>In the above figure, the default responder has a UID <code>0000:00000001</code>. To send an RDM command addressed to the gateway itself, using the RDMnet controller API, we would use the following addressing information:</p>
<p> 
<div class="code-tab-selector">
  <button id="button_2_c" class="code-tab-links" onclick="selectLanguage(event, '2', 'c')">C</button>
  <button id="button_2_cpp" class="code-tab-links" onclick="selectLanguage(event, '2', 'cpp')">C++</button>
</div>
<div id="div_2_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><a class="code" href="struct_rdmnet_destination_addr.html">RdmnetDestinationAddr</a> to_gateway = <a class="code" href="group__rdmnet__api__common.html#ga58f3b5c690b7ebd792e8d2851af95ea0">RDMNET_ADDR_TO_DEFAULT_RESPONDER</a>(0x0000, 0x00000001);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This convenience initialization macro is equivalent to:</span></div>
<div class="line">to_gateway.<a class="code" href="struct_rdmnet_destination_addr.html#a8e6df84af732e8c8e08a278da3a41716">rdmnet_uid</a> = gateway_uid; <span class="comment">// { 0x0000, 0x00000001 }</span></div>
<div class="line">to_gateway.<a class="code" href="struct_rdmnet_destination_addr.html#af994e8e7dc2374e6eafbf8c29123e7e6">endpoint</a> = E133_NULL_ENDPOINT;</div>
<div class="line">to_gateway.<a class="code" href="struct_rdmnet_destination_addr.html#a6dad6b36ac6a598b384253050b36e59e">rdm_uid</a> = gateway_uid; <span class="comment">// { 0x0000, 0x00000001 }</span></div>
<div class="line">to_gateway.<a class="code" href="struct_rdmnet_destination_addr.html#a7e7996349ea8e4be23b48e4ff38ef16e">subdevice</a> = 0;</div>
<div class="ttc" id="agroup__rdmnet__api__common_html_ga58f3b5c690b7ebd792e8d2851af95ea0"><div class="ttname"><a href="group__rdmnet__api__common.html#ga58f3b5c690b7ebd792e8d2851af95ea0">RDMNET_ADDR_TO_DEFAULT_RESPONDER</a></div><div class="ttdeci">#define RDMNET_ADDR_TO_DEFAULT_RESPONDER(manu_id, dev_id)</div><div class="ttdoc">Initialize an RdmnetDestinationAddr with a default responder address.</div><div class="ttdef"><b>Definition:</b> client.h:106</div></div>
<div class="ttc" id="astruct_rdmnet_destination_addr_html"><div class="ttname"><a href="struct_rdmnet_destination_addr.html">RdmnetDestinationAddr</a></div><div class="ttdoc">A destination address for an RDM command in RDMnet's RPT protocol.</div><div class="ttdef"><b>Definition:</b> client.h:84</div></div>
<div class="ttc" id="astruct_rdmnet_destination_addr_html_a6dad6b36ac6a598b384253050b36e59e"><div class="ttname"><a href="struct_rdmnet_destination_addr.html#a6dad6b36ac6a598b384253050b36e59e">RdmnetDestinationAddr::rdm_uid</a></div><div class="ttdeci">RdmUid rdm_uid</div><div class="ttdoc">The UID of the RDM responder to which this message is addressed.</div><div class="ttdef"><b>Definition:</b> client.h:96</div></div>
<div class="ttc" id="astruct_rdmnet_destination_addr_html_a7e7996349ea8e4be23b48e4ff38ef16e"><div class="ttname"><a href="struct_rdmnet_destination_addr.html#a7e7996349ea8e4be23b48e4ff38ef16e">RdmnetDestinationAddr::subdevice</a></div><div class="ttdeci">uint16_t subdevice</div><div class="ttdoc">The sub-device to which this command is addressed, or 0 for the root device.</div><div class="ttdef"><b>Definition:</b> client.h:98</div></div>
<div class="ttc" id="astruct_rdmnet_destination_addr_html_a8e6df84af732e8c8e08a278da3a41716"><div class="ttname"><a href="struct_rdmnet_destination_addr.html#a8e6df84af732e8c8e08a278da3a41716">RdmnetDestinationAddr::rdmnet_uid</a></div><div class="ttdeci">RdmUid rdmnet_uid</div><div class="ttdoc">The UID of the RDMnet component to which this command is addressed.</div><div class="ttdef"><b>Definition:</b> client.h:86</div></div>
<div class="ttc" id="astruct_rdmnet_destination_addr_html_af994e8e7dc2374e6eafbf8c29123e7e6"><div class="ttname"><a href="struct_rdmnet_destination_addr.html#af994e8e7dc2374e6eafbf8c29123e7e6">RdmnetDestinationAddr::endpoint</a></div><div class="ttdeci">uint16_t endpoint</div><div class="ttdoc">The endpoint on the RDMnet component to which this message is addressed.</div><div class="ttdef"><b>Definition:</b> client.h:91</div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_2_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> to_gateway = <a class="code" href="classrdmnet_1_1_destination_addr.html#a8c1f337f355371cdb56f19f164cf125b">rdmnet::DestinationAddr::ToDefaultResponder</a>(0x0000, 0x00000001);</div>
<div class="ttc" id="aclassrdmnet_1_1_destination_addr_html_a8c1f337f355371cdb56f19f164cf125b"><div class="ttname"><a href="classrdmnet_1_1_destination_addr.html#a8c1f337f355371cdb56f19f164cf125b">rdmnet::DestinationAddr::ToDefaultResponder</a></div><div class="ttdeci">static constexpr DestinationAddr ToDefaultResponder(const rdm::Uid &amp;rdmnet_uid, uint16_t subdevice=0)</div><div class="ttdoc">Get a DestinationAddr representing a message addressed to a component's default responder.</div><div class="ttdef"><b>Definition:</b> client.h:103</div></div>
</div><!-- fragment --><p> 
</div>
</p>
<p>The gateway is also connected to two RDM responders, which are attached to port 1 (which the gateway represents over RDMnet as endpoint 1). To address one of these responders, we would:</p>
<p> 
<div class="code-tab-selector">
  <button id="button_3_c" class="code-tab-links" onclick="selectLanguage(event, '3', 'c')">C</button>
  <button id="button_3_cpp" class="code-tab-links" onclick="selectLanguage(event, '3', 'cpp')">C++</button>
</div>
<div id="div_3_c" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><a class="codeRef" href="https://etclabs.github.io/RDM/docs/head/struct_rdm_uid.html">RdmUid</a> responder_uid = {0x0000, 0x00000012};</div>
<div class="line"> </div>
<div class="line"><a class="code" href="struct_rdmnet_destination_addr.html">RdmnetDestinationAddr</a> to_responder = <a class="code" href="group__rdmnet__api__common.html#ga72d760619ede4c36a44fc4a0fd6913e5">RDMNET_ADDR_TO_SUB_RESPONDER</a>(0x0000, 0x00000001, 1, 0x0000, 0x00000012);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This convenience initialization macro is equivalent to:</span></div>
<div class="line">to_responder.<a class="code" href="struct_rdmnet_destination_addr.html#a8e6df84af732e8c8e08a278da3a41716">rdmnet_uid</a> = gateway_uid; <span class="comment">// { 0x0000, 0x00000001 }</span></div>
<div class="line">to_responder.<a class="code" href="struct_rdmnet_destination_addr.html#af994e8e7dc2374e6eafbf8c29123e7e6">endpoint</a> = 1;</div>
<div class="line">to_responder.<a class="code" href="struct_rdmnet_destination_addr.html#a6dad6b36ac6a598b384253050b36e59e">rdm_uid</a> = responder_uid; <span class="comment">// { 0x0000, 0x00000012 }</span></div>
<div class="line">to_responder.<a class="code" href="struct_rdmnet_destination_addr.html#a7e7996349ea8e4be23b48e4ff38ef16e">subdevice</a> = 0;</div>
<div class="ttc" id="agroup__rdmnet__api__common_html_ga72d760619ede4c36a44fc4a0fd6913e5"><div class="ttname"><a href="group__rdmnet__api__common.html#ga72d760619ede4c36a44fc4a0fd6913e5">RDMNET_ADDR_TO_SUB_RESPONDER</a></div><div class="ttdeci">#define RDMNET_ADDR_TO_SUB_RESPONDER(rdmnet_manu, rdmnet_dev, endpoint, rdm_manu, rdm_dev)</div><div class="ttdoc">Initialize an RdmnetDestinationAddr with the address of a sub-responder on a component.</div><div class="ttdef"><b>Definition:</b> client.h:130</div></div>
<div class="ttc" id="astruct_rdm_uid_html"><div class="ttname"><a href="https://etclabs.github.io/RDM/docs/head/struct_rdm_uid.html">RdmUid</a></div></div>
</div><!-- fragment --><p> 
</div>
<div id="div_3_cpp" class="code-tab-content">
</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> to_responder = <a class="code" href="classrdmnet_1_1_destination_addr.html#a7c7746701f2ad6f1143918158f0b7e64">rdmnet::DestinationAddr::ToSubResponder</a>(</div>
<div class="line">    <a class="codeRef" href="https://etclabs.github.io/RDM/docs/head/classrdm_1_1_uid.html">rdm::Uid</a>(0x0000, 0x00000001), <span class="comment">// The gateway&#39;s UID</span></div>
<div class="line">    1,                            <span class="comment">// The endpoint</span></div>
<div class="line">    <a class="codeRef" href="https://etclabs.github.io/RDM/docs/head/classrdm_1_1_uid.html">rdm::Uid</a>(0x0000, 0x00000012)  <span class="comment">// The RDM responder&#39;s UID</span></div>
<div class="line">);</div>
<div class="ttc" id="aclassrdm_1_1_uid_html"><div class="ttname"><a href="https://etclabs.github.io/RDM/docs/head/classrdm_1_1_uid.html">rdm::Uid</a></div></div>
<div class="ttc" id="aclassrdmnet_1_1_destination_addr_html_a7c7746701f2ad6f1143918158f0b7e64"><div class="ttname"><a href="classrdmnet_1_1_destination_addr.html#a7c7746701f2ad6f1143918158f0b7e64">rdmnet::DestinationAddr::ToSubResponder</a></div><div class="ttdeci">static constexpr DestinationAddr ToSubResponder(const rdm::Uid &amp;rdmnet_uid, uint16_t endpoint, const rdm::Uid &amp;rdm_uid, uint16_t subdevice=0)</div><div class="ttdoc">Get a DestinationAddr representing a message addressed to a sub-responder on a component.</div><div class="ttdef"><b>Definition:</b> client.h:129</div></div>
</div><!-- fragment --><p> 
</div>
</p>
<h2>Patching ports to sACN universes</h2>
<p>ANSI E1.37-7 provides the <code>ENDPOINT_TO_UNIVERSE</code> RDM command which allows a nonzero endpoint to be assigned to a universe of sACN. The default responder handles this command and uses it to manage the patching of ports to DMX universes; this provides a standard way to assign universes to ports on RDMnet-enabled gateways.</p>
<p>Note that this only handles basic one-to-one patching of universes to ports; advanced patching techniques which assign portions of universes or individual addresses are outside the scope of the RDMnet standard and are typically done with vendor-specific configuration software.</p>
<h2>Virtual Endpoints and Virtual Responders</h2>
<p>In RDMnet, devices that consume sACN without converting it to the DMX512 physical layer represent this functionality using <em>virtual endpoints</em>, which contain <em>RPT responders</em> (aka <em>virtual responders</em>). A good example of this is a network-connected moving light:</p>
<p><img src="network_fixture.png" alt="" class="inline" title="A networked fixture"/></p>
<p>As above, the device's <em>default responder</em> (represented by UID <code>0000:00000003</code>) represents the device's top-level RDMnet configuration information. The portion of the device that acts on sACN data is modeled as endpoint 1, and can be patched to an sACN universe by the <code>ENDPOINT_TO_UNIVERSE</code> command. A <em>virtual responder</em> (represented by the dynamic UID <code>8000:11112222</code>) receives RDM commands related to the device's DMX operation, including setting the DMX start address.</p>
<p>One way to think of a network-connected fixture in RDMnet is as containing a virtual one-port gateway, with the actual fixture (and its RDM responder) connected to its DMX512 port. The default responder represents the properties of the fixture's RDMnet gateway, and the virtual responder represents the properties of the fixture itself.</p>
<h3>Responder IDs</h3>
<p>Both top-level RDMnet devices and virtual responders can be identified by dynamic UIDs (see <a class="el" href="roles_and_addressing.html">Roles and Addressing</a> for more information on dynamic UIDs). Because the UID of these responders can change over time, RDMnet requires them to also have an unchanging identifier that controllers can use as a primary key for the responder. For default responders, this unchanging identifier is the device's CID. However, virtual responders do not have a CID and thus must have a different identifier. This identifier is (you guessed it) another UUID, called a Responder ID (RID).</p>
<p>Here is an updated version of the previous example with the full set of identifying information about the responders, including the persistent identifiers:</p>
<p><img src="network_fixture_2.png" alt="" class="inline" title="A networked fixture with persistent IDs shown"/></p>
<p>RIDs are not present in the RDM messaging used in RDMnet; mappings between RID and UID are provided by a broker on request from a controller. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="how_it_works.html">How RDMnet Works</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
